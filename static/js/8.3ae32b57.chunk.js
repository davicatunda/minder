(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[8],{200:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return D})),n.d(t,"b",(function(){return C}));var a=n(80),r=n.n(a),i=n(39),c=n(32),o=n(91),l=n(199);function s(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function j(e){return function(e){var t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(d(e))}function b(e){return function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),d(n.buffer)}(e))}function O(e){return function(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(s(e))}function p(e){return u(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),s(n.buffer)}(e))}var f=n(0);function h(){return(h=Object(o.a)(r.a.mark((function e(t,n){var a,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.importKey("raw",p(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return i=e.sent,e.next=6,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},i,u(t));case 6:return c=e.sent,e.abrupt("return","".concat(j(a),"!").concat(O(c)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(o.a)(r.a.mark((function e(t,n){var a,i,o,l,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("!"),i=Object(c.a)(a,2),o=i[0],l=i[1],e.next=3,window.crypto.subtle.importKey("raw",p(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return u=e.sent,e.next=6,window.crypto.subtle.decrypt({name:"AES-GCM",iv:b(o)},u,p(l));case 6:return d=e.sent,e.abrupt("return",s(d));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,e.abrupt("return",O(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)&&44===e.length}function m(e,t){var n=Object(f.useState)(null),a=Object(c.a)(n,2),r=a[0],o=a[1],s=t.title;return Object(f.useEffect)((function(){null!==e&&o(Object(l.d)(e,{title:s}))}),[e,s]),null===r?null:{store:r,updateNodes:function(e){var t=Object(i.a)({},r.nodes);e.forEach((function(e){return t[e.key]=e}));var n={rootNode:Object(i.a)(Object(i.a)({},r.rootNode),{},{updated:new Date}),nodes:t};o(n)}}}function D(e,t){var n=Object(f.useState)(null),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(f.useState)(!1),l=Object(c.a)(o,2),s=l[0],u=l[1];return Object(f.useEffect)((function(){"{"===e[0]?(i(e),u(!1)):function(e,t){return x.apply(this,arguments)}(e,t).then((function(e){i(e),u(!1)})).catch((function(){u(!0),i("{}")}))}),[e,t]),{decryptedData:r,hasFailed:s}}function C(e,t,n){(function(e,t){return h.apply(this,arguments)})(Object(l.c)(e),t).then(n)}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(32),r=n(5),i=n(184),c=n(164),o=n(190),l=n(191),s=n(193),u=n(333),d=n(303),j=n(300),b=n(304),O=n(301),p=n(194),f=n(315),h=n(316),x=n(0),y=n.n(x);function v(e){var t=e.onDelete,n=Object(x.useRef)(null),o=Object(x.useState)(!1),l=Object(a.a)(o,2),s=l[0],u=l[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{onClick:function(){return u(!0)},ref:n,children:Object(r.jsx)(f.a,{})}),Object(r.jsx)(c.a,{anchorEl:n.current,open:s,onClose:function(){return u(!1)},children:Object(r.jsx)(g,{onDelete:function(){t(),u(!1)}})})]})}function g(e){var t=e.onDelete,n=y.a.useState(!1),i=Object(a.a)(n,2),c=i[0],f=i[1];return Object(r.jsxs)("div",{children:[Object(r.jsxs)(o.a,{onClick:function(){return f(!0)},children:[Object(r.jsx)(l.a,{style:{minWidth:36},children:Object(r.jsx)(h.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Delete"})]}),Object(r.jsxs)(u.a,{open:c,onClose:function(){return f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(r.jsx)(d.a,{id:"alert-dialog-title",children:"Delete this item?"}),Object(r.jsx)(j.a,{children:Object(r.jsx)(b.a,{id:"alert-dialog-description",children:"This action can not be undone, are you sure you want to procced?"})}),Object(r.jsxs)(O.a,{children:[Object(r.jsx)(p.a,{onClick:function(){return f(!1)},color:"primary",children:"No"}),Object(r.jsx)(p.a,{onClick:function(){t(),f(!1)},color:"primary",autoFocus:!0,children:"Yes"})]})]})]})}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(5),r=n(307),i=n(313),c=n(309),o=n(249),l=n(193),s=n(314),u=n(32),d=n(59),j=n(194),b=n(164),O=n(190),p=n(191),f=n(251),h=n(337),x=n(310),y=n(311),v=n(312),g=n(0),m=n(199),D=n(227),C=n(200),w=n(228);function S(e,t,n,a){Object(C.b)(e,t,(function(r){var i=new FormData;i.append("metadata",new Blob([JSON.stringify({name:e.rootNode.title,mimeType:"text/plain;charset=base64",parents:["appDataFolder"],appProperties:{title:e.rootNode.title,encryptionKey:n.withKey?t:void 0}})],{type:"application/json"})),i.append("file",new Blob([r],{type:"text/plain"}));var c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&a&&a()},c.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),c.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),c.responseType="json",c.send(i)}))}var k=n(198);function A(){var e=Object(k.b)(),t=e.store,n=e.encryptionKey,r=e.googleResourceId,i=Object(d.a)(),c=Object(g.useRef)(null),o=Object(g.useState)(!1),s=Object(u.a)(o,2),A=s[0],I=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return I(!0)},ref:c,children:"Save Data"}),Object(a.jsxs)(b.a,{anchorEl:c.current,open:A,onClose:function(){return I(!1)},children:[n&&Object(a.jsxs)(O.a,{onClick:function(){I(!1),Object(C.b)(t,n,(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=base64,"+encodeURIComponent(e)),t.setAttribute("download","data.ish"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Download"})]}),Object(a.jsx)(f.a,{}),n&&Object(a.jsxs)(O.a,{onClick:function(){I(!1),Object(C.b)(t,n,(function(e){navigator.clipboard.writeText(e).then((function(){I(!1)}))}))},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(y.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Copy"})]}),Object(a.jsxs)(O.a,{onClick:function(){navigator.clipboard.writeText(Object(m.c)(t)).then((function(){I(!1)}))},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(y.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Copy as JSON"})]}),Object(a.jsx)(f.a,{}),n&&Object(a.jsxs)(O.a,{onClick:function(){I(!1),S(t,n,{withKey:!1})},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(D.Icon,{icon:w.a,width:20,height:20})}),Object(a.jsx)(l.a,{children:r?"Save as copy":"Save"})]}),n&&Object(a.jsxs)(O.a,{onClick:function(){I(!1),S(t,n,{withKey:!0})},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(D.Icon,{icon:w.a,width:20,height:20})}),Object(a.jsx)(l.a,{children:r?"Save with key as copy":"Save with key"}),Object(a.jsx)("span",{style:{width:i.spacing(1)}}),Object(a.jsx)(h.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(a.jsx)(v.a,{fontSize:"inherit"})})]}),r&&n&&Object(a.jsxs)(O.a,{onClick:function(){I(!1),function(e,t,n,a){Object(C.b)(e,t,(function(e){var t=new XMLHttpRequest;t.responseType="json",t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&a&&a()},t.open("PATCH","https://www.googleapis.com/upload/drive/v3/files/".concat(n,"?uploadType=media")),t.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),t.send(e)}))}(t,n,r)},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(D.Icon,{icon:w.a,width:20,height:20})}),Object(a.jsx)(l.a,{children:"Update"}),Object(a.jsx)("span",{style:{width:i.spacing(1)}}),Object(a.jsx)(h.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(a.jsx)(v.a,{fontSize:"inherit"})})]})]})]})}var I=n(192);function T(){var e=Object(k.b)().encryptionKey,t=Object(g.useRef)(null),n=Object(g.useState)(!1),r=Object(u.a)(n,2),i=r[0],c=r[1];return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return c(!0)},ref:t,children:"Save Key"}),Object(a.jsxs)(b.a,{anchorEl:t.current,open:i,onClose:function(){return c(!1)},children:[Object(a.jsxs)(O.a,{onClick:function(){c(!1)},href:"data:text/plain;charset=base64,".concat(e),download:"key.ish",children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Download"})]}),Object(a.jsxs)(O.a,{onClick:function(){navigator.clipboard.writeText(e).then((function(){c(!1)}))},children:[Object(a.jsx)(p.a,{style:{minWidth:36},children:Object(a.jsx)(I.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Copy"})]})]})]}):null}var K=n(218);function E(){var e=Object(k.b)().store;return Object(a.jsxs)(r.a,{style:{maxWidth:400},variant:"outlined",children:[Object(a.jsx)(i.a,{title:e.rootNode.title}),Object(a.jsx)(c.a,{children:Object(a.jsxs)(o.a,{container:!0,spacing:1,children:[Object(a.jsxs)(o.a,{item:!0,xs:6,children:[Object(a.jsx)(l.a,{variant:"body2",children:"Created"}),Object(a.jsx)(l.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(K.a)(e.rootNode.created)})]}),Object(a.jsxs)(o.a,{item:!0,xs:6,children:[Object(a.jsx)(l.a,{variant:"body2",children:"Last Updated"}),Object(a.jsx)(l.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(K.a)(e.rootNode.updated)})]})]})}),Object(a.jsxs)(s.a,{children:[Object(a.jsx)(T,{}),Object(a.jsx)(A,{})]})]})}},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(5),r=n(59),i=n(126),c=n(200),o=n(217),l=n(208),s=n(198),u=n(211),d=n(207);n(0);function j(e){var t=e.vaultData,n=t.title,j=t.encryptionKey,b=t.initialData,O=e.children,p=e.isReadOnly,f=void 0!==p&&p,h=e.onDelete,x=Object(r.a)(),y=Object(o.b)(),v=Object(c.e)(b,j).decryptedData,g=Object(c.d)(v,{title:n});if(!g)return null;var m=g.store,D=g.updateNodes;return Object(a.jsx)(o.a.Provider,{value:y,children:Object(a.jsx)(s.a.Provider,{value:{store:m,encryptionKey:j,updateNodes:f?null:D},children:Object(a.jsxs)(i.a,{style:{position:"relative",padding:x.spacing(3)},children:[Object(a.jsx)("div",{style:{position:"absolute",right:x.spacing(1),top:x.spacing(1)},children:Object(a.jsx)(d.a,{onDelete:h})}),Object(a.jsx)(u.a,{}),Object(a.jsx)("div",{style:{height:x.spacing(3)}}),Object(a.jsx)(l.a,{nodeKey:m.rootNode.value}),O&&O(m)]})})})}},329:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Se}));var a=n(212),r=n(32),i=n(5),c=n(59),o=n(189),l=n(249),s=n(251),u=n(0),d=n(39),j=n(126),b=n(200),O=n(217),p=n(208),f=n(198),h=n(211),x=n(207);function y(e){var t=e.vaultData,n=t.title,a=t.encryptionKey,r=t.initialData,o=e.resourceId,l=e.onDelete,s=Object(c.a)(),u=Object(O.b)(),d=Object(b.e)(r,a).decryptedData,y=Object(b.d)(d,{title:n});if(!y)return null;var v=y.store,g=y.updateNodes;return Object(i.jsx)(O.a.Provider,{value:u,children:Object(i.jsx)(f.a.Provider,{value:{store:v,updateNodes:g,googleResourceId:o,encryptionKey:a},children:Object(i.jsxs)(j.a,{style:{position:"relative",padding:s.spacing(3)},children:[Object(i.jsx)("div",{style:{position:"absolute",right:s.spacing(1),top:s.spacing(1)},children:Object(i.jsx)(x.a,{onDelete:l})}),Object(i.jsx)(h.a,{}),Object(i.jsx)("div",{style:{height:s.spacing(3)}}),Object(i.jsx)(p.a,{nodeKey:v.rootNode.value})]})})})}var v=n(193),g=n(194),m=n(318),D=n(334),C=n(302),w=n(337),S=n(184),k=n(317);function A(e){var t=e.children,n=e.onDrop;return Object(i.jsx)("div",{onDrop:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n(e.dataTransfer.files[0])})),onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:t})}function I(e,t){if(e){var n=new FileReader;n.onloadend=function(){"string"===typeof n.result&&t(n.result)},n.readAsText(e)}}function T(e){var t=e.encryptionKey,n=e.setEncryptionKey;return Object(i.jsx)(A,{onDrop:function(e){return I(e,n)},children:Object(i.jsx)(D.a,{variant:"outlined",margin:"dense",error:t.length>0&&!Object(b.c)(t),required:!0,fullWidth:!0,label:"Encryption Key",type:"password",autoComplete:"current-encryption-key",value:t,onChange:function(e){return n(e.target.value)},InputProps:{endAdornment:Object(i.jsx)(C.a,{position:"end",children:Object(i.jsx)(w.a,{title:"Generate key",arrow:!0,children:Object(i.jsx)(S.a,{"aria-label":"generate encryption Key",onClick:function(){return Object(b.a)().then(n)},children:Object(i.jsx)(k.a,{fontSize:"small"})})})})}})})}function K(e){var t=e.title,n=e.encryptionKey,a=e.initialData,r=e.onDelete,o=Object(c.a)(),l=Object(b.e)(a,n),s=l.decryptedData,u=l.hasFailed,d=""===t?"Title":t,O=Object(b.d)(s,{title:d});if(!O)return null;var y=O.store;return Object(i.jsx)(f.a.Provider,{value:{store:y,updateNodes:null,encryptionKey:n},children:Object(i.jsxs)(j.a,{style:{flex:1,position:"relative",overflow:"hidden",padding:o.spacing(3)},children:[Object(i.jsx)("div",{style:{position:"absolute",right:o.spacing(1),top:o.spacing(1),zIndex:2},children:Object(i.jsx)(x.a,{onDelete:r})}),Object(i.jsx)("div",{style:{backgroundColor:o.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(i.jsx)(v.a,{variant:"h3",children:"Preview"})}),Object(i.jsx)(h.a,{}),Object(i.jsx)("div",{style:{height:o.spacing(3)}}),u?Object(i.jsx)(v.a,{variant:"body2",color:"textSecondary",component:"p",children:"Data mismatch"}):Object(i.jsx)(p.a,{nodeKey:y.rootNode.value})]})})}function E(e){var t=e.title,n=e.setTitle;return Object(i.jsx)(D.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Title",autoComplete:"title",value:t,onChange:function(e){return n(e.target.value)},autoFocus:0===t.length})}function N(e){var t=e.vaultData,n=e.onDelete,a=e.onChange,r=e.onSubmit,o=Object(c.a)(),s=t.title,u=t.encryptionKey,O=t.initialData,p=Object(b.e)(O,u).hasFailed;return Object(i.jsxs)(l.a,{container:!0,spacing:2,children:[Object(i.jsx)(l.a,{item:!0,xs:12,md:4,xl:3,style:{display:"flex",minHeight:500},children:Object(i.jsxs)(j.a,{style:{padding:o.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},children:[Object(i.jsx)(v.a,{variant:"h4",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(i.jsx)("div",{style:{height:o.spacing(2)}}),Object(i.jsx)(E,{title:t.title,setTitle:function(e){return a(Object(d.a)(Object(d.a)({},t),{},{title:e}))}}),Object(i.jsx)(T,{encryptionKey:u,setEncryptionKey:function(e){return a(Object(d.a)(Object(d.a)({},t),{},{encryptionKey:e}))}}),Object(i.jsx)("div",{style:{flexGrow:1,flexShrink:0,flexBasis:o.spacing(2)}}),""!==u&&p&&Object(i.jsx)(v.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(i.jsx)(g.a,{fullWidth:!0,variant:"contained",disabled:p||0===u.length,color:"primary",size:"medium",startIcon:Object(i.jsx)(m.a,{}),onClick:r,children:"Open"})]})}),Object(i.jsx)(l.a,{item:!0,xs:12,md:8,xl:9,style:{display:"flex"},children:Object(i.jsx)(K,{title:s,encryptionKey:u,initialData:O,onDelete:n})})]})}function R(e){var t=e.onDelete,n=Object(c.a)();return Object(i.jsxs)(l.a,{container:!0,spacing:2,children:[Object(i.jsx)(l.a,{item:!0,xs:12,md:4,xl:3,style:{display:"flex",minHeight:500},children:Object(i.jsxs)(j.a,{style:{padding:n.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},children:[Object(i.jsx)(v.a,{variant:"h4",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(i.jsx)("div",{style:{flexGrow:1,flexShrink:0,flexBasis:n.spacing(2)}}),Object(i.jsx)(g.a,{fullWidth:!0,variant:"contained",disabled:!0,color:"primary",size:"medium",startIcon:Object(i.jsx)(m.a,{}),children:"Open"})]})}),Object(i.jsx)(l.a,{item:!0,xs:12,md:8,xl:9,style:{display:"flex"},children:Object(i.jsxs)(j.a,{style:{flex:1,position:"relative",overflow:"hidden",padding:n.spacing(3)},children:[Object(i.jsx)("div",{style:{position:"absolute",right:n.spacing(1),top:n.spacing(1),zIndex:2},children:Object(i.jsx)(x.a,{onDelete:t})}),Object(i.jsx)("div",{style:{backgroundColor:n.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}})]})})]})}function P(e){var t=e.card,n=e.setGoogleCards,a=function(){var e;(e=t.resourceId,gapi.client.drive.files.delete({fileId:e})).then((function(){n((function(e){return e.filter((function(e){return t.resourceId!==e.resourceId}))}))}))},r=Object(u.useCallback)((function(e){n((function(n){return n.map((function(n){return n.resourceId===t.resourceId?Object(d.a)(Object(d.a)({},n),{},{vaultData:e}):n}))}))}),[t.resourceId,n]);return""===t.vaultData.initialData?t.isOpen?Object(i.jsx)(R,{onDelete:a}):null:t.isCreating?Object(i.jsx)(N,{vaultData:t.vaultData,onChange:r,onDelete:a,onSubmit:function(){var e=Object(d.a)(Object(d.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.resourceId===n.resourceId?e:n}))}))}}):Object(i.jsx)(y,{vaultData:t.vaultData,onDelete:a,resourceId:t.resourceId})}var z=n(151),M=n(191),G=n(250),U=n(89),W=n(33);function B(){var e=Object(U.a)(["\n  query MemoryPage {\n    standardProposal {\n      version\n      data\n    }\n  }\n"]);return B=function(){return e},e}var F=Object(W.gql)(B());function H(e){var t=Object(W.useQuery)(F,{onCompleted:e}).data;return null===t||void 0===t?void 0:t.standardProposal}var q=n(275);function L(e){var t,n=e.addCard,a=H(),r={vaultData:{title:"",encryptionKey:"",initialData:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:""},id:Object(q.a)(),isOpen:!0,isCreating:null!=(null===a||void 0===a?void 0:a.data),isReadOnly:!0};return Object(i.jsx)(o.a,{component:"nav",children:Object(i.jsxs)(z.a,{button:!0,onClick:function(){return n(r)},children:[Object(i.jsx)(M.a,{children:Object(i.jsx)(m.a,{})}),Object(i.jsx)(G.a,{primary:"Open"})]})})}var Y=n(319),J=n(320),X={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};function V(e){var t=e.card,n=e.toogleCardVisibility;return Object(i.jsxs)(z.a,{button:!0,onClick:function(){return n(t)},children:[Object(i.jsx)(M.a,{children:t.isOpen?Object(i.jsx)(Y.a,{}):Object(i.jsx)(J.a,{})}),Object(i.jsx)(G.a,{primary:t.vaultData.title,primaryTypographyProps:{style:X}})]},t.id)}function Z(e){var t=e.card,n=e.setCards;return Object(i.jsx)(V,{card:t,toogleCardVisibility:function(e){return n((function(t){return t.map((function(t){return e.id===t.id?Object(d.a)(Object(d.a)({},t),{},{isOpen:!t.isOpen}):t}))}))}})}var _=n(227),Q=n(228),$={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};function ee(e){var t=e.card,n=e.onClick;return Object(i.jsxs)(z.a,{button:!0,onClick:n,children:[Object(i.jsxs)(M.a,{children:[t.isOpen?Object(i.jsx)(Y.a,{}):Object(i.jsx)(J.a,{}),Object(i.jsx)(_.Icon,{icon:Q.a,width:12,height:12})]}),Object(i.jsx)(G.a,{primary:t.vaultData.title,primaryTypographyProps:{style:$}})]},t.resourceId)}function te(e){var t=e.card,n=e.setGoogleCards,a=Object(u.useState)(!1),c=Object(r.a)(a,2),o=c[0],l=c[1];return Object(i.jsx)(ee,{card:t,onClick:function(){""!==t.vaultData.initialData||o||(l(!0),gapi.client.drive.files.get({fileId:t.resourceId,alt:"media"}).then((function(e){var a=e.body;l(!1),n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(d.a)(Object(d.a)({},e),{},{vaultData:Object(d.a)(Object(d.a)({},e.vaultData),{},{initialData:a})}):e}))}))}))),n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(d.a)(Object(d.a)({},e),{},{isOpen:!e.isOpen}):e}))}))}})}var ne,ae=n(229),re=n(323),ie=n(297),ce=n(338),oe=n(324),le=n(331),se=n(321),ue=n(322),de=n(312),je=n(325),be=n(326);function Oe(e){var t,n=e.setInitialData,a=Object(c.a)(),o=Object(u.useState)(!1),l=Object(r.a)(o,2),s=l[0],d=l[1],j=Object(u.useState)(ne.STANDARD),b=Object(r.a)(j,2),O=b[0],p=b[1],f=Object(u.useState)(null),h=Object(r.a)(f,2),x=h[0],y=h[1],m=H((function(e){var t=e.standardProposal;O===ne.STANDARD&&n(t.data)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(i.jsx)(v.a,{variant:"body1",children:"Data Options"}),Object(i.jsx)(S.a,{onClick:function(){return d((function(e){return!e}))},"aria-expanded":s,"aria-label":"show more",children:s?Object(i.jsx)(se.a,{}):Object(i.jsx)(ue.a,{})})]}),Object(i.jsxs)(re.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(i.jsx)(ie.a,{component:"legend",children:"Initial Data"}),Object(i.jsxs)(ce.a,{"aria-label":"Initial data",value:O,onChange:function(e){var t,a=e.target.value;switch(p(a),a){case ne.CUSTOM:return n(null!==x&&void 0!==x?x:"");case ne.EMPTY:return n("{}");case ne.STANDARD:return n(null!==(t=null===m||void 0===m?void 0:m.data)&&void 0!==t?t:"")}},children:[Object(i.jsx)(oe.a,{value:ne.STANDARD,control:Object(i.jsx)(le.a,{size:"small"}),label:"Standard v".concat(null!==(t=null===m||void 0===m?void 0:m.version)&&void 0!==t?t:"*")}),Object(i.jsx)(oe.a,{value:ne.EMPTY,control:Object(i.jsx)(le.a,{size:"small"}),label:"Empty"}),Object(i.jsx)(oe.a,{value:ne.CUSTOM,control:Object(i.jsx)(le.a,{size:"small"}),label:Object(i.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:["My own ",Object(i.jsx)("span",{style:{width:a.spacing(1)}}),Object(i.jsx)(w.a,{title:"Your encrypted data or a strigfied json",placement:"top",children:Object(i.jsx)(de.a,{fontSize:"inherit"})})]})})]}),ne.CUSTOM===O&&Object(i.jsx)(A,{onDrop:function(e){return I(e,(function(e){y(e),O===ne.CUSTOM&&n(e)}))},children:Object(i.jsxs)(g.a,{component:"label",fullWidth:!0,style:{textTransform:"none",outlineWidth:2,outlineStyle:"dashed",outlineColor:a.palette.secondary.main},startIcon:null===x?Object(i.jsx)(je.a,{}):Object(i.jsx)(be.a,{}),children:[Object(i.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t;return I(null===(t=e.target.files)||void 0===t?void 0:t[0],(function(e){y(e),O===ne.CUSTOM&&n(e)}))}}),null===x?Object(i.jsx)(v.a,{variant:"body1",children:"Drag or upload your data"}):Object(i.jsx)(v.a,{variant:"body1",children:"Done"})]})})]})]})}function pe(e){var t=e.vaultData,n=e.onChange,a=e.onSubmit,r=Object(c.a)(),o=Object(b.e)(t.initialData,t.encryptionKey).hasFailed;return Object(i.jsxs)(j.a,{style:{padding:r.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},children:[Object(i.jsx)(v.a,{variant:"h4",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(i.jsx)("div",{style:{height:r.spacing(2)}}),Object(i.jsx)(E,{title:t.title,setTitle:function(e){return n(Object(d.a)(Object(d.a)({},t),{},{title:e}))}}),Object(i.jsx)(T,{encryptionKey:t.encryptionKey,setEncryptionKey:function(e){return n(Object(d.a)(Object(d.a)({},t),{},{encryptionKey:e}))}}),Object(i.jsx)(Oe,{setInitialData:function(e){return n(Object(d.a)(Object(d.a)({},t),{},{initialData:e}))}}),Object(i.jsx)("div",{style:{flexGrow:1,flexShrink:0,flexBasis:r.spacing(2)}}),""!==t.initialData&&""!==t.encryptionKey&&o&&Object(i.jsx)(v.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(i.jsx)(g.a,{fullWidth:!0,variant:"contained",disabled:o||0===t.encryptionKey.length,color:"primary",size:"medium",startIcon:Object(i.jsx)(m.a,{}),onClick:function(){a()},children:"Open"})]})}function fe(e){var t=e.vaultData,n=e.onDelete,a=e.onSubmit,r=e.onChange;return Object(i.jsxs)(l.a,{container:!0,spacing:2,children:[Object(i.jsx)(l.a,{item:!0,xs:12,md:4,xl:3,style:{display:"flex",minHeight:500},children:Object(i.jsx)(pe,{vaultData:t,onChange:r,onSubmit:a})}),Object(i.jsx)(l.a,{item:!0,xs:12,md:8,xl:9,style:{display:"flex"},children:Object(i.jsx)(K,Object(d.a)(Object(d.a)({},t),{},{onDelete:n}))})]})}function he(e){var t=e.vaultData,n=e.onChange;return H((function(e){var a=e.standardProposal;n(Object(d.a)(Object(d.a)({},t),{},{initialData:a.data}))})),Object(i.jsx)(w.a,{title:"This app uses a free tier Heroku Dyno and will sleep after 30 minutes of inactivity",arrow:!0,children:Object(i.jsx)(v.a,{variant:"body1",display:"inline",children:"Warming up the server just for you..."})})}function xe(e){var t=e.card,n=e.setCards,a=function(){n((function(e){return e.filter((function(e){return t.id!==e.id}))}))},r=function(e){n((function(n){return n.map((function(n){return n.id===t.id?Object(d.a)(Object(d.a)({},n),{},{vaultData:e}):n}))}))};return t.isCreating||""!==t.vaultData.initialData?t.isCreating?Object(i.jsx)(fe,{vaultData:t.vaultData,onSubmit:function(){var e=Object(d.a)(Object(d.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.id===n.id?e:n}))}))},onDelete:a,onChange:r}):Object(i.jsx)(ae.a,{vaultData:t.vaultData,isReadOnly:t.isReadOnly,onDelete:a}):Object(i.jsx)(he,{vaultData:t.vaultData,onChange:r})}!function(e){e.STANDARD="STANDARD",e.EMPTY="EMPTY",e.CUSTOM="CUSTOM"}(ne||(ne={}));var ye=n(97),ve=n(46);function ge(e){var t=Object(ve.b)();Object(u.useEffect)((function(){null!==t&&t.isSignedIn.get()||e([])}),[t,e]);var n=function(e){var t=Object(ve.b)(),n=null===t||void 0===t?void 0:t.currentUser.get();if(!n||!n.isSignedIn())return!1;var a=n.hasGrantedScopes(e);return a||n.grant({scope:e}),a}(ye.b);Object(u.useEffect)((function(){n&&gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, appProperties)",pageSize:100}).then((function(t){var n;e(null!==(n=t.result.files)&&void 0!==n?n:[])}))}),[n,e])}function me(e){var t,n,a,r,i;return{resourceId:null!==(t=e.id)&&void 0!==t?t:"",vaultData:{title:null!==(n=null===(a=e.appProperties)||void 0===a?void 0:a.title)&&void 0!==n?n:"",encryptionKey:null!==(r=null===(i=e.appProperties)||void 0===i?void 0:i.encryptionKey)&&void 0!==r?r:"",initialData:""},isCreating:!0,isOpen:!1}}var De=n(262),Ce=n.n(De),we=n(16);function Se(){var e=Object(c.a)(),t=Object(u.useState)([]),n=Object(r.a)(t,2),d=n[0],j=n[1];!function(e){ge(Object(u.useCallback)((function(t){var n=t.map(me);e(n)}),[e]))}(j);var b=Object(u.useState)([]),O=Object(r.a)(b,2),p=O[0],f=O[1];!function(e){var t=Object(we.g)().search;Object(u.useEffect)((function(){var n,r=Ce.a.parse(t);if(null!=r.key||null!=r.data){var i=null==r.key||null==r.data,c={id:Object(q.a)(),isOpen:!0,isReadOnly:!!i||"false"!==r.readOnly,isCreating:i,vaultData:{title:null!==(n=r.title)&&void 0!==n?n:"",encryptionKey:r.key?r.key.split(" ").join("+"):"",initialData:r.data?r.data.split(" ").join("+"):""}};e((function(e){return[c].concat(Object(a.a)(e))}))}}),[t,e])}(f);var h=p.filter((function(e){return!e.isCreating})),x=[Object(i.jsx)(L,{addCard:function(e){return f((function(t){return[e].concat(Object(a.a)(t))}))}},"PreviewCardNavBar"),h.length>0&&Object(i.jsx)(o.a,{component:"nav",children:h.map((function(e){return Object(i.jsx)(Z,{card:e,setCards:f},e.id)}))},"CardNavBar"),d.length>0&&Object(i.jsx)(o.a,{component:"nav",children:d.map((function(e){return Object(i.jsx)(te,{card:e,setGoogleCards:j},e.resourceId)}))},"GoogleCardsNavBar")],y=[].concat(Object(a.a)(p.map((function(t){return Object(i.jsxs)("div",{style:{display:t.isOpen?"initial":"none"},children:[Object(i.jsx)(xe,{card:t,setCards:f}),Object(i.jsx)("div",{style:{height:e.spacing(2)}})]},t.id)}))),Object(a.a)(d.map((function(t){return Object(i.jsxs)("div",{style:{display:t.isOpen?"initial":"none"},children:[Object(i.jsx)(P,{card:t,setGoogleCards:j}),Object(i.jsx)("div",{style:{height:e.spacing(2)}})]},t.resourceId)})))),v={borderRightColor:e.palette.divider,borderRightWidth:1,borderRightStyle:"solid"},g={padding:e.spacing(2)};return Object(i.jsxs)(l.a,{container:!0,style:{flex:1},children:[Object(i.jsx)(l.a,{item:!0,xs:12,sm:4,md:3,lg:2,style:v,children:x.map((function(e,t){return t===x.length-1?e:[e,Object(i.jsx)(s.a,{},"LeftNavSection-".concat(t))]}))}),Object(i.jsx)(l.a,{item:!0,xs:12,sm:8,md:9,lg:10,style:g,children:y})]})}}}]);
//# sourceMappingURL=8.3ae32b57.chunk.js.map