(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[8],{202:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return w})),n.d(t,"b",(function(){return C}));var a=n(79),r=n.n(a),i=n(38),c=n(41),o=n(91),l=n(197);function s(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function j(e){return function(e){var t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(d(e))}function b(e){return function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),d(n.buffer)}(e))}function p(e){return function(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(s(e))}function O(e){return u(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),s(n.buffer)}(e))}var y=n(0);function f(){return(f=Object(o.a)(r.a.mark((function e(t,n){var a,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.importKey("raw",O(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return i=e.sent,e.next=6,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},i,u(t));case 6:return c=e.sent,e.abrupt("return","".concat(j(a),"!").concat(p(c)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t,n){var a,i,o,l,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("!"),i=Object(c.a)(a,2),o=i[0],l=i[1],e.next=3,window.crypto.subtle.importKey("raw",O(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return u=e.sent,e.next=6,window.crypto.subtle.decrypt({name:"AES-GCM",iv:b(o)},u,O(l));case 6:return d=e.sent,e.abrupt("return",s(d));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,e.abrupt("return",p(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)&&44===e.length}function m(e,t,n){var a=Object(y.useState)(null),r=Object(c.a)(a,2),o=r[0],s=r[1];return Object(y.useEffect)((function(){null!==e&&s(Object(l.d)(e,{title:n,encryptionKey:t}))}),[e,t,n]),null===o?null:{store:o,updateNodes:function(e){var t=Object(i.a)({},o.nodes);e.forEach((function(e){return t[e.key]=e}));var n={rootNode:Object(i.a)(Object(i.a)({},o.rootNode),{},{updated:new Date}),nodes:t};s(n)}}}function w(e,t){var n=Object(y.useState)(null),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(y.useState)(!1),l=Object(c.a)(o,2),s=l[0],u=l[1];return Object(y.useEffect)((function(){"{"===e[0]?(i(e),u(!1)):function(e,t){return h.apply(this,arguments)}(e,t).then((function(e){i(e),u(!1)})).catch((function(){u(!0),i("{}")}))}),[e,t]),{decryptedData:r,hasFailed:s}}function C(e,t){(function(e,t){return f.apply(this,arguments)})(Object(l.c)(e),e.rootNode.encryptionKey).then(t)}},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(41),r=n(5),i=n(292),c=n(293),o=n(328),l=n(192),s=n(294),u=n(246),d=n(295),j=n(193),b=n(0),p=n(223),O=n(214),y=n(202),f=n(198);function h(){var e=Object(b.useState)(!0),t=Object(a.a)(e,2),n=t[0],h=t[1],x=Object(f.b)().store;return Object(r.jsxs)(i.a,{style:{maxWidth:400},variant:"outlined",children:[Object(r.jsx)(c.a,{title:x.rootNode.title,subheader:Object(r.jsx)(o.a,{title:"double click to show",placement:"top",children:Object(r.jsx)(l.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,onDoubleClick:function(){return h((function(e){return!e}))},children:n?Object(r.jsx)(p.a,{style:{height:12,width:"100%",marginTop:8,display:"block"}}):x.rootNode.encryptionKey})})}),Object(r.jsx)(s.a,{children:Object(r.jsxs)(u.a,{container:!0,spacing:1,children:[Object(r.jsxs)(u.a,{item:!0,xs:6,children:[Object(r.jsx)(l.a,{variant:"body2",children:"Created"}),Object(r.jsx)(l.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(O.a)(x.rootNode.created)})]}),Object(r.jsxs)(u.a,{item:!0,xs:6,children:[Object(r.jsx)(l.a,{variant:"body2",children:"Last Updated"}),Object(r.jsx)(l.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(O.a)(x.rootNode.updated)})]})]})}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(j.a,{size:"small",color:"primary",href:"data:text/plain;charset=base64,".concat(x.rootNode.encryptionKey),download:"key.ish",children:"Save Key"}),Object(r.jsx)(j.a,{size:"small",color:"primary",onClick:function(){Object(y.b)(x,(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=base64,"+encodeURIComponent(e)),t.setAttribute("download","data.ish"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:"Save Data"})]})]})}},221:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(5),r=n(58),i=n(125),c=n(328),o=n(183),l=n(202),s=n(222),u=n(213),d=n(208),j=n(307),b=n(198);n(0);function p(e){var t=e.children,n=e.title,p=e.isReadOnly,O=void 0!==p&&p,y=e.initialValues,f=y.encryptionKey,h=y.initialData,x=e.onClose,v=Object(r.a)(),g=Object(s.b)(),m=Object(l.e)(h,f).decryptedData,w=Object(l.d)(m,f,n);if(!w)return null;var C=w.store,S=w.updateNodes;return Object(a.jsx)(s.a.Provider,{value:g,children:Object(a.jsx)(b.a.Provider,{value:{store:C,updateNodes:O?null:S},children:Object(a.jsxs)(i.a,{style:{position:"relative",padding:v.spacing(3)},children:[Object(a.jsx)("div",{style:{position:"absolute",right:v.spacing(1),top:v.spacing(1)},children:Object(a.jsx)(c.a,{title:"Did you save? Just checking",arrow:!0,children:Object(a.jsx)(o.a,{"aria-label":"close card",onClick:x,children:Object(a.jsx)(j.a,{})})})}),Object(a.jsx)(u.a,{}),Object(a.jsx)("div",{style:{height:v.spacing(3)}}),Object(a.jsx)(d.a,{nodeKey:C.rootNode.value}),t&&t(C)]})})})}},325:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var a,r=n(38),i=n(217),c=n(41),o=n(89),l=n(5),s=n(318),u=n(319),d=n(309),j=n(221),b=n(58),p=n(188),O=n(150),y=n(190),f=n(247),h=n(248),x=n(246),v=n(0),g=n(37),m=n(310),w=n(311),C=n(312),S=n(315),A=n(316),D=n(317),K=n(192),P=n(193),k=n(327),T=n(303),E=n(328),N=n(183),M=n(313),U=n(298),R=n(331),V=n(314),z=n(323),I=n(202);function F(e){var t=e.children,n=e.onDrop;return Object(l.jsx)("div",{onDrop:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n(e.dataTransfer.files[0])})),onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:t})}function W(e){var t,n=e.standardProposal,a=e.onSubmit,i=e.onChange,o=e.onCancel,s=Object(b.a)(),u={title:"",initialValues:{encryptionKey:"",initialData:n.data}},j=Object(v.useState)(u),p=Object(c.a)(j,2),O=p[0],y=p[1];var f=Object(I.e)(O.initialValues.initialData,O.initialValues.encryptionKey).hasFailed,h=O.initialValues,x=h.encryptionKey,g=h.initialData;return Object(l.jsxs)("div",{style:{padding:s.spacing(2)},children:[Object(l.jsx)(G,{title:null!==(t=O.title)&&void 0!==t?t:"",setTitle:function(e){var t=Object(r.a)(Object(r.a)({},O),{},{title:e});y(t),i(t)}}),Object(l.jsx)(B,{encryptionKey:x,setEncryptionKey:function(e){var t=Object(r.a)(Object(r.a)({},O),{},{initialValues:Object(r.a)(Object(r.a)({},O.initialValues),{},{encryptionKey:e})});y(t),i(t)}}),Object(l.jsx)(Y,{standardProposal:n,setInitialData:function(e){var t=Object(r.a)(Object(r.a)({},O),{},{initialValues:Object(r.a)(Object(r.a)({},O.initialValues),{},{initialData:e})});y(t),i(t)}}),Object(l.jsx)("div",{style:{height:s.spacing(2)}}),""!==g&&null!==x&&f&&Object(l.jsx)(K.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(l.jsx)(P.a,{fullWidth:!0,variant:"contained",disabled:f||0===x.length,color:"primary",size:"small",startIcon:Object(l.jsx)(d.a,{}),onClick:function(){a(O),y(u)},children:"Open"}),Object(l.jsx)(P.a,{fullWidth:!0,size:"small",onClick:o,children:"Cancel"})]})}function G(e){var t=e.title,n=e.setTitle;return Object(l.jsx)(k.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Title",autoComplete:"title",value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0})}function B(e){var t=e.encryptionKey,n=e.setEncryptionKey;return Object(l.jsx)(F,{onDrop:function(e){return q(e,n)},children:Object(l.jsx)(k.a,{variant:"outlined",margin:"dense",error:t.length>0&&!Object(I.c)(t),required:!0,fullWidth:!0,label:"Encryption Key",type:"password",autoComplete:"current-encryption-key",value:t,onChange:function(e){return n(e.target.value)},InputProps:{endAdornment:Object(l.jsx)(T.a,{position:"end",children:Object(l.jsx)(E.a,{title:"Generate key",arrow:!0,children:Object(l.jsx)(N.a,{"aria-label":"generate encryption Key",onClick:function(){return Object(I.a)().then(n)},children:Object(l.jsx)(m.a,{fontSize:"small"})})})})}})})}function Y(e){var t=e.standardProposal,n=e.setInitialData,r=Object(b.a)(),i=Object(v.useState)(!1),o=Object(c.a)(i,2),s=o[0],u=o[1],d=Object(v.useState)(a.STANDARD),j=Object(c.a)(d,2),p=j[0],O=j[1],y=Object(v.useState)(null),f=Object(c.a)(y,2),h=f[0],x=f[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(l.jsx)(K.a,{variant:"body1",children:"Data Options"}),Object(l.jsx)(N.a,{onClick:function(){return u((function(e){return!e}))},"aria-expanded":s,"aria-label":"show more",children:s?Object(l.jsx)(w.a,{}):Object(l.jsx)(C.a,{})})]}),Object(l.jsxs)(M.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(l.jsx)(U.a,{component:"legend",children:"Initial Data"}),Object(l.jsxs)(R.a,{"aria-label":"Initial data",value:p,onChange:function(e){var r=e.target.value;switch(O(r),r){case a.CUSTOM:return n(null!==h&&void 0!==h?h:"");case a.EMPTY:return n("{}");case a.STANDARD:return n(t.data)}},children:[Object(l.jsx)(V.a,{value:a.STANDARD,control:Object(l.jsx)(z.a,{size:"small"}),label:"Standard v".concat(t.version)}),Object(l.jsx)(V.a,{value:a.EMPTY,control:Object(l.jsx)(z.a,{size:"small"}),label:"Empty"}),Object(l.jsx)(V.a,{value:a.CUSTOM,control:Object(l.jsx)(z.a,{size:"small"}),label:Object(l.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:["My own ",Object(l.jsx)("span",{style:{width:r.spacing(1)}}),Object(l.jsx)(E.a,{title:"Your encrypted data or a strigfied json",placement:"top",children:Object(l.jsx)(S.a,{fontSize:"inherit"})})]})})]}),a.CUSTOM===p&&Object(l.jsx)(F,{onDrop:function(e){return q(e,(function(e){x(e),p===a.CUSTOM&&n(e)}))},children:Object(l.jsxs)(P.a,{component:"label",fullWidth:!0,style:{textTransform:"none",outlineWidth:2,outlineStyle:"dashed",outlineColor:r.palette.secondary.main},startIcon:null===h?Object(l.jsx)(A.a,{}):Object(l.jsx)(D.a,{}),children:[Object(l.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t;return q(null===(t=e.target.files)||void 0===t?void 0:t[0],(function(e){x(e),p===a.CUSTOM&&n(e)}))}}),null===h?Object(l.jsx)(K.a,{variant:"body1",children:"Drag or upload your data"}):Object(l.jsx)(K.a,{variant:"body1",children:"Done"})]})})]})]})}function q(e,t){if(e){var n=new FileReader;n.onloadend=function(){"string"===typeof n.result&&t(n.result)},n.readAsText(e)}}!function(e){e.STANDARD="STANDARD",e.EMPTY="EMPTY",e.CUSTOM="CUSTOM"}(a||(a={}));var J=n(125),Z=n(213),L=n(208),Q=n(198);function $(e){var t=e.title,n=e.initialValues,a=n.encryptionKey,r=n.initialData,i=Object(b.a)(),c=Object(I.e)(r,a),o=c.decryptedData,s=c.hasFailed,u=Object(I.d)(o,a,t);if(!u)return null;var d=u.store;return Object(l.jsx)(Q.a.Provider,{value:{store:d,updateNodes:null},children:Object(l.jsxs)(J.a,{style:{position:"relative",overflow:"hidden",padding:i.spacing(3)},children:[Object(l.jsx)("div",{style:{backgroundColor:i.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(l.jsx)(K.a,{variant:"h3",children:"Preview"})}),Object(l.jsx)(Z.a,{}),Object(l.jsx)("div",{style:{height:i.spacing(3)}}),s?Object(l.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:"Data mismatch"}):Object(l.jsx)(L.a,{nodeKey:d.rootNode.value})]})})}var H=n(259),X=n.n(H),_=n(16),ee=n(272);function te(){var e=Object(o.a)(["\n  query MemoryPage {\n    standardProposal {\n      version\n      data\n    }\n  }\n"]);return te=function(){return e},e}var ne=Object(g.gql)(te());function ae(){var e=Object(b.a)(),t=function(){var e=Object(_.g)().search,t=X.a.parse(e);if(null==t.key||null==t.data)return null;return{id:Object(ee.a)(),isOpen:!0,isReadOnly:"false"!==t.readOnly,cardProps:{title:t.title,initialValues:{encryptionKey:t.key.split(" ").join("+"),initialData:t.data.split(" ").join("+")}}}}(),n=Object(v.useState)(t?[t]:[]),a=Object(c.a)(n,2),o=a[0],x=a[1],m=Object(v.useState)(null),w=Object(c.a)(m,2),C=w[0],S=w[1],A=C?[C].concat(Object(i.a)(o)):o,D=Object(v.useState)(!1),K=Object(c.a)(D,2),P=K[0],k=K[1],T=Object(g.useQuery)(ne).data;return Object(l.jsx)(re,{leftNav:Object(l.jsxs)(l.Fragment,{children:[A.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p.a,{component:"nav",children:A.map((function(e){return Object(l.jsxs)(O.a,{button:!0,onClick:function(){return x((function(t){return t.map((function(t){return e.id===t.id?Object(r.a)(Object(r.a)({},t),{},{isOpen:!t.isOpen}):t}))}))},children:[Object(l.jsx)(y.a,{children:e.isOpen?Object(l.jsx)(s.a,{}):Object(l.jsx)(u.a,{})}),Object(l.jsx)(f.a,{primary:""!==e.cardProps.title?e.cardProps.title:"Title",primaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}},secondary:""!==e.cardProps.initialValues.encryptionKey?e.cardProps.initialValues.encryptionKey:"key",secondaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}}})]},e.cardProps.initialValues.encryptionKey)}))}),Object(l.jsx)(h.a,{})," "]}),Object(l.jsx)(p.a,{component:"nav",children:P&&T?Object(l.jsx)(W,{standardProposal:T.standardProposal,onChange:function(e){S({cardProps:e,isOpen:!0,id:"preview",isReadOnly:!0})},onSubmit:function(e){k(!1),S(null),x((function(t){return[{cardProps:e,isOpen:!0,isReadOnly:!1,id:Object(ee.a)()}].concat(Object(i.a)(t))}))},onCancel:function(){k(!1),S(null)}}):Object(l.jsxs)(O.a,{button:!0,onClick:function(){return k(!0)},children:[Object(l.jsx)(y.a,{children:Object(l.jsx)(d.a,{})}),Object(l.jsx)(f.a,{primary:"Open"})]})})]}),body:Object(l.jsxs)(l.Fragment,{children:[C&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)($,Object(r.a)({},C.cardProps)),Object(l.jsx)("div",{style:{height:e.spacing(2)}})]}),o.filter((function(e){return e.isOpen})).map((function(t){return Object(l.jsxs)("div",{children:[Object(l.jsx)(j.a,Object(r.a)(Object(r.a)({},t.cardProps),{},{isReadOnly:t.isReadOnly,onClose:function(){return x(o.filter((function(e){return t.id!==e.id})))}})),Object(l.jsx)("div",{style:{height:e.spacing(2)}})]},t.id)}))]})})}function re(e){var t=e.leftNav,n=e.body,a=Object(b.a)();return Object(l.jsxs)(x.a,{container:!0,style:{flex:1},children:[Object(l.jsx)(x.a,{item:!0,xs:12,sm:4,md:3,lg:2,style:{borderRightColor:a.palette.divider,borderRightWidth:1,borderRightStyle:"solid"},children:t}),Object(l.jsx)(x.a,{item:!0,xs:12,sm:8,md:9,lg:10,style:{padding:a.spacing(2)},children:n})]})}}}]);
//# sourceMappingURL=8.7317bee9.chunk.js.map