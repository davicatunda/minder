(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[9],{200:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return w})),n.d(t,"b",(function(){return C}));var r=n(80),a=n.n(r),c=n(39),i=n(32),o=n(91),s=n(199);function l(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,a=e.length;r<a;r++)n[r]=e.charCodeAt(r);return t}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function j(e){return function(e){var t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,r){r[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(d(e))}function b(e){return function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,a=e.length;r<a;r++)n[r]=e.charCodeAt(r);return t}(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,r){r[n]=t.charCodeAt(n)})),d(n.buffer)}(e))}function p(e){return function(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,r){r[n]=e.charCodeAt(n)})),btoa(d(t.buffer))}(l(e))}function h(e){return u(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,r){r[n]=t.charCodeAt(n)})),l(n.buffer)}(e))}var f=n(0);function O(){return(O=Object(o.a)(a.a.mark((function e(t,n){var r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.importKey("raw",h(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return c=e.sent,e.next=6,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},c,u(t));case 6:return i=e.sent,e.abrupt("return","".concat(j(r),"!").concat(p(i)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t,n){var r,c,o,s,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split("!"),c=Object(i.a)(r,2),o=c[0],s=c[1],e.next=3,window.crypto.subtle.importKey("raw",h(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return u=e.sent,e.next=6,window.crypto.subtle.decrypt({name:"AES-GCM",iv:b(o)},u,h(s));case 6:return d=e.sent,e.abrupt("return",l(d));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,e.abrupt("return",p(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)&&44===e.length}function g(e,t){var n=Object(f.useState)(null),r=Object(i.a)(n,2),a=r[0],o=r[1],l=t.title;return Object(f.useEffect)((function(){null!==e&&o(Object(s.d)(e,{title:l}))}),[e,l]),null===a?null:{store:a,updateNodes:function(e){var t=Object(c.a)({},a.nodes);e.forEach((function(e){return t[e.key]=e}));var n={rootNode:Object(c.a)(Object(c.a)({},a.rootNode),{},{updated:new Date}),nodes:t};o(n)}}}function w(e,t){var n=Object(f.useState)(null),r=Object(i.a)(n,2),a=r[0],c=r[1],o=Object(f.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(f.useEffect)((function(){"{"===e[0]?(c(e),u(!1)):function(e,t){return y.apply(this,arguments)}(e,t).then((function(e){c(e),u(!1)})).catch((function(){u(!0),c("{}")}))}),[e,t]),{decryptedData:a,hasFailed:l}}function C(e,t,n){(function(e,t){return O.apply(this,arguments)})(Object(s.c)(e),t).then(n)}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(32),a=n(5),c=n(184),i=n(164),o=n(190),s=n(191),l=n(193),u=n(333),d=n(303),j=n(300),b=n(304),p=n(301),h=n(194),f=n(315),O=n(316),y=n(0),x=n.n(y);function v(e){var t=e.onDelete,n=Object(y.useRef)(null),o=Object(y.useState)(!1),s=Object(r.a)(o,2),l=s[0],u=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(c.a,{onClick:function(){return u(!0)},ref:n,children:Object(a.jsx)(f.a,{})}),Object(a.jsx)(i.a,{anchorEl:n.current,open:l,onClose:function(){return u(!1)},children:Object(a.jsx)(m,{onDelete:function(){t(),u(!1)}})})]})}function m(e){var t=e.onDelete,n=x.a.useState(!1),c=Object(r.a)(n,2),i=c[0],f=c[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(o.a,{onClick:function(){return f(!0)},children:[Object(a.jsx)(s.a,{style:{minWidth:36},children:Object(a.jsx)(O.a,{fontSize:"small",color:"action"})}),Object(a.jsx)(l.a,{children:"Delete"})]}),Object(a.jsxs)(u.a,{open:i,onClose:function(){return f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(d.a,{id:"alert-dialog-title",children:"Delete this item?"}),Object(a.jsx)(j.a,{children:Object(a.jsx)(b.a,{id:"alert-dialog-description",children:"This action can not be undone, are you sure you want to procced?"})}),Object(a.jsxs)(p.a,{children:[Object(a.jsx)(h.a,{onClick:function(){return f(!1)},color:"primary",children:"No"}),Object(a.jsx)(h.a,{onClick:function(){t(),f(!1)},color:"primary",autoFocus:!0,children:"Yes"})]})]})]})}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(5),a=n(307),c=n(313),i=n(309),o=n(249),s=n(193),l=n(314),u=n(32),d=n(59),j=n(194),b=n(164),p=n(190),h=n(191),f=n(251),O=n(337),y=n(310),x=n(311),v=n(312),m=n(0),g=n(199),w=n(227),C=n(200),k=n(228);function S(e,t,n,r){Object(C.b)(e,t,(function(a){var c=new FormData;c.append("metadata",new Blob([JSON.stringify({name:e.rootNode.title,mimeType:"text/plain;charset=base64",parents:["appDataFolder"],appProperties:{title:e.rootNode.title,encryptionKey:n.withKey?t:void 0}})],{type:"application/json"})),c.append("file",new Blob([a],{type:"text/plain"}));var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&r&&r()},i.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),i.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),i.responseType="json",i.send(c)}))}var A=n(198);function D(){var e=Object(A.b)(),t=e.store,n=e.encryptionKey,a=e.googleResourceId,c=Object(d.a)(),i=Object(m.useRef)(null),o=Object(m.useState)(!1),l=Object(u.a)(o,2),D=l[0],N=l[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return N(!0)},ref:i,children:"Save Data"}),Object(r.jsxs)(b.a,{anchorEl:i.current,open:D,onClose:function(){return N(!1)},children:[n&&Object(r.jsxs)(p.a,{onClick:function(){N(!1),Object(C.b)(t,n,(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=base64,"+encodeURIComponent(e)),t.setAttribute("download","data.ish"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(y.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Download"})]}),Object(r.jsx)(f.a,{}),n&&Object(r.jsxs)(p.a,{onClick:function(){N(!1),Object(C.b)(t,n,(function(e){navigator.clipboard.writeText(e).then((function(){N(!1)}))}))},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Copy"})]}),Object(r.jsxs)(p.a,{onClick:function(){navigator.clipboard.writeText(Object(g.c)(t)).then((function(){N(!1)}))},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Copy as JSON"})]}),Object(r.jsx)(f.a,{}),n&&Object(r.jsxs)(p.a,{onClick:function(){N(!1),S(t,n,{withKey:!1})},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(w.Icon,{icon:k.a,width:20,height:20})}),Object(r.jsx)(s.a,{children:a?"Save as copy":"Save"})]}),n&&Object(r.jsxs)(p.a,{onClick:function(){N(!1),S(t,n,{withKey:!0})},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(w.Icon,{icon:k.a,width:20,height:20})}),Object(r.jsx)(s.a,{children:a?"Save with key as copy":"Save with key"}),Object(r.jsx)("span",{style:{width:c.spacing(1)}}),Object(r.jsx)(O.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(r.jsx)(v.a,{fontSize:"inherit"})})]}),a&&n&&Object(r.jsxs)(p.a,{onClick:function(){N(!1),function(e,t,n,r){Object(C.b)(e,t,(function(e){var t=new XMLHttpRequest;t.responseType="json",t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&r&&r()},t.open("PATCH","https://www.googleapis.com/upload/drive/v3/files/".concat(n,"?uploadType=media")),t.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),t.send(e)}))}(t,n,a)},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(w.Icon,{icon:k.a,width:20,height:20})}),Object(r.jsx)(s.a,{children:"Update"}),Object(r.jsx)("span",{style:{width:c.spacing(1)}}),Object(r.jsx)(O.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(r.jsx)(v.a,{fontSize:"inherit"})})]})]})]})}var N=n(192);function E(){var e=Object(A.b)().encryptionKey,t=Object(m.useRef)(null),n=Object(m.useState)(!1),a=Object(u.a)(n,2),c=a[0],i=a[1];return e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{size:"small",color:"primary",onClick:function(){return i(!0)},ref:t,children:"Save Key"}),Object(r.jsxs)(b.a,{anchorEl:t.current,open:c,onClose:function(){return i(!1)},children:[Object(r.jsxs)(p.a,{onClick:function(){i(!1)},href:"data:text/plain;charset=base64,".concat(e),download:"key.ish",children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(y.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Download"})]}),Object(r.jsxs)(p.a,{onClick:function(){navigator.clipboard.writeText(e).then((function(){i(!1)}))},children:[Object(r.jsx)(h.a,{style:{minWidth:36},children:Object(r.jsx)(N.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(s.a,{children:"Copy"})]})]})]}):null}var P=n(218);function T(){var e=Object(A.b)().store;return Object(r.jsxs)(a.a,{style:{maxWidth:400},variant:"outlined",children:[Object(r.jsx)(c.a,{title:e.rootNode.title}),Object(r.jsx)(i.a,{children:Object(r.jsxs)(o.a,{container:!0,spacing:1,children:[Object(r.jsxs)(o.a,{item:!0,xs:6,children:[Object(r.jsx)(s.a,{variant:"body2",children:"Created"}),Object(r.jsx)(s.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(P.a)(e.rootNode.created)})]}),Object(r.jsxs)(o.a,{item:!0,xs:6,children:[Object(r.jsx)(s.a,{variant:"body2",children:"Last Updated"}),Object(r.jsx)(s.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:Object(P.a)(e.rootNode.updated)})]})]})}),Object(r.jsxs)(l.a,{children:[Object(r.jsx)(E,{}),Object(r.jsx)(D,{})]})]})}},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(5),a=n(59),c=n(126),i=n(200),o=n(217),s=n(208),l=n(198),u=n(211),d=n(207);n(0);function j(e){var t=e.vaultData,n=t.title,j=t.encryptionKey,b=t.initialData,p=e.children,h=e.isReadOnly,f=void 0!==h&&h,O=e.onDelete,y=Object(a.a)(),x=Object(o.b)(),v=Object(i.e)(b,j).decryptedData,m=Object(i.d)(v,{title:n});if(!m)return null;var g=m.store,w=m.updateNodes;return Object(r.jsx)(o.a.Provider,{value:x,children:Object(r.jsx)(l.a.Provider,{value:{store:g,encryptionKey:j,updateNodes:f?null:w},children:Object(r.jsxs)(c.a,{style:{position:"relative",padding:y.spacing(3)},children:[Object(r.jsx)("div",{style:{position:"absolute",right:y.spacing(1),top:y.spacing(1)},children:Object(r.jsx)(d.a,{onDelete:O})}),Object(r.jsx)(u.a,{}),Object(r.jsx)("div",{style:{height:y.spacing(3)}}),Object(r.jsx)(s.a,{nodeKey:g.rootNode.value}),p&&p(g)]})})})}},327:function(e,t,n){"use strict";n.r(t);var r=n(32),a=n(89),c=n(5),i=n(126),o=n(193),s=n(59),l=n(334),u=n(194),d=n(0),j=n(199),b=n(33),p=n(208),h=n(198),f=n(229),O=n(16);function y(){var e=Object(a.a)(["\n  query StandardPage {\n    user {\n      uuid\n    }\n    standardProposal {\n      version\n      data\n    }\n    proposals {\n      uuid\n    }\n  }\n"]);return y=function(){return e},e}function x(){var e=Object(a.a)(["\n  mutation Adding($proposal: String!) {\n    addProposal(proposal: $proposal) {\n      uuid\n    }\n  }\n"]);return x=function(){return e},e}var v=Object(b.gql)(x()),m=Object(b.gql)(y());function g(e){var t=e.standardProposal,n=Object(j.d)(t.data,{});return Object(c.jsx)(h.a.Provider,{value:{store:n,updateNodes:null},children:Object(c.jsxs)(i.a,{style:{position:"relative",padding:24},children:[Object(c.jsxs)(o.a,{variant:"h2",children:["Proposed API ",t.version]}),Object(c.jsx)(p.a,{nodeKey:n.rootNode.value})]})})}var w={"?Parent field":{"Proposed Field":{type:"text",description:"# in markdown","?subfields":["more fields"]}}};function C(){var e=Object(d.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],p=Object(s.a)(),h=Object(d.useState)(""),O=Object(r.a)(h,2),y=O[0],x=O[1],m=Object(b.useMutation)(v),g=Object(r.a)(m,1)[0];return n?Object(c.jsx)(f.a,{vaultData:{title:y,encryptionKey:"1Qd1fIUBT6KuzgM9mQOIkk8k77mkXz/4BGMnttcdY1c=",initialData:JSON.stringify(w)},onDelete:function(){return a(!1)},children:function(e){return Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){g({variables:{proposal:Object(j.c)(e)}}),a(!1),x("")},style:{marginTop:p.spacing(2)},children:"Make new proposal"})}}):Object(c.jsxs)(i.a,{style:{padding:p.spacing(2),margin:"".concat(p.spacing(2),"px auto"),maxWidth:380},children:[Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(c.jsx)(o.a,{variant:"h5",children:"Start"})}),Object(c.jsx)(l.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Title",value:y,onChange:function(e){return x(e.target.value)},autoFocus:!0,style:{marginBottom:p.spacing(2)}}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return a(!0)},children:"Make new proposal"})]})}function k(e){var t=e.proposals,n=Object(O.f)();return Object(c.jsxs)(i.a,{style:{position:"relative",padding:24},children:[Object(c.jsx)(o.a,{variant:"h2",children:"All Proposals"}),Object(c.jsx)("ul",{children:t.map((function(e){var t=e.uuid;return Object(c.jsxs)("li",{children:["Proposal ",t,":",Object(c.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return n.push("/minder/proposal/".concat(t))},children:"Check it out"})]},t)}))})]})}t.default=function(){var e,t=Object(b.useQuery)(m).data;if(null==t)return null;var n=t.standardProposal,r=t.proposals;return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{standardProposal:n}),null!=(null===(e=t.user)||void 0===e?void 0:e.uuid)&&Object(c.jsx)(C,{}),Object(c.jsx)(k,{proposals:r})]})}}}]);
//# sourceMappingURL=9.430ed636.chunk.js.map