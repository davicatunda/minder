(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[3],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var r={clientId:"79887996241-lkot8h9s6ehcv4cd07kl9nsugt965pr8.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"profile"},c="https://www.googleapis.com/auth/drive.appdata"},152:function(e,t,n){"use strict";n.r(t);var r=n(40),c=n(5),i=(n(136),n(34)),a=n(84),o=n(16),s=n(45),l=n(186),u=n(196),j=n(197),b=n(187),d=n(198),h=n(199),O=n(200),g=n(55);function f(e){var t=e.size;return Object(c.jsx)("svg",{fill:"currentColor",width:null!==t&&void 0!==t?t:"100%",height:"100%",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M 64.984 8.73 C 76.744 12.943 84.985 22.628 87.624 35.396 C 90.644 50.175 82.029 64.451 67.562 68.665 C 65.55 69.23 62.909 69.607 61.589 69.483 C 59.513 69.293 59.198 69.105 59.198 67.721 C 59.198 66.274 59.513 66.086 62.909 65.709 C 76.682 63.947 86.178 51.244 84.103 37.471 C 82.405 26.779 76.243 18.289 66.746 13.572 C 52.281 6.466 33.225 12.755 26.243 26.968 C 24.42 30.679 23.854 33.068 21.779 45.835 C 21.339 48.854 20.584 50.237 17.376 54.451 C 15.239 57.218 13.665 59.734 13.918 60.111 C 14.105 60.489 15.363 61.369 16.684 62.06 C 19.262 63.319 20.017 64.954 19.451 67.783 C 19.201 69.168 19.451 69.859 20.584 70.803 C 21.904 71.872 21.967 72.186 21.274 73.382 C 20.584 74.513 20.646 74.954 21.842 76.399 C 22.973 77.846 23.099 78.602 22.785 81.683 C 22.281 85.96 22.973 86.589 28.004 86.589 C 32.471 86.589 34.168 84.953 34.985 79.985 C 35.363 77.909 35.613 67.532 35.613 56.967 C 35.613 33.76 36.065 31.921 41.41 26.512 C 45.561 22.363 48.948 21.811 54.796 21.811 C 61.84 21.811 68.631 26.34 71.714 33.068 C 73.538 37.093 73.474 43.822 71.651 47.345 C 67.627 54.892 58.695 57.847 50.897 54.262 C 45.3 51.621 42.155 46.024 42.658 39.357 C 43.098 33.006 47.815 28.728 54.356 28.728 C 58.633 28.728 62.153 30.489 64.292 33.697 C 69.513 41.684 63.915 51.119 55.299 48.728 C 50.834 47.47 47.815 41.874 49.703 38.225 C 52.155 33.509 60.015 35.332 59.387 40.489 C 59.136 42.628 57.186 42.943 56.117 40.992 C 55.739 40.301 55.173 39.546 54.796 39.294 C 53.852 38.603 52.721 39.987 53.035 41.496 C 53.664 43.886 55.173 45.081 57.69 45.081 C 61.84 45.081 63.853 40.992 61.714 36.905 C 60.142 33.887 57.204 32.501 53.684 32.501 C 50.916 32.501 46.132 35.544 46.132 40.301 C 46.132 49.798 56.053 55.206 63.978 50.175 C 67.627 47.911 69.26 44.703 69.198 40.048 C 68.996 28.296 55.633 19.3 43.954 29.168 C 41.421 31.307 39.752 35.747 39.498 41.292 L 39.387 58.853 C 39.073 80.802 39.011 81.998 37.689 84.828 C 35.992 88.6 32.785 90.362 27.69 90.362 C 20.961 90.362 18.069 87.531 18.948 81.872 C 19.262 79.355 19.137 78.854 17.942 77.846 C 16.432 76.652 16.056 74.954 15.93 68.79 C 15.866 66.588 15.552 65.709 14.734 65.457 C 14.169 65.269 12.785 64.325 11.778 63.319 C 8.823 60.615 9.2 58.98 13.854 52.69 C 17.879 47.281 17.942 47.156 18.634 41.621 C 20.143 29.043 22.47 23.51 28.948 17.031 C 33.728 12.315 39.199 9.107 45.236 7.596 C 50.394 6.278 59.576 6.78 64.984 8.73 Z"})})}var p=n(0),x=n(32),C=n(183),v=n(185);function m(e){var t=e.onClick,n=e.startIcon,r=e.children;return Object(c.jsx)(C.a,{color:"inherit",onClick:t,startIcon:n,className:Object(x.a)({textTransform:"none"}),disableRipple:!0,children:Object(c.jsx)(v.a,{variant:"h6",children:r})})}function w(e){var t=e.route,n=e.startIcon,r=e.label,i=Object(s.a)(),a=Object(o.g)(),u=Object(o.f)(),j=a.pathname===t&&"/minder"!==t;return Object(l.a)("(max-width:450px)")?Object(c.jsx)(b.a,{onClick:function(){return u.push(t)},children:n}):Object(c.jsxs)(m,{onClick:function(){return u.push(t)},startIcon:n,children:[j&&Object(c.jsx)("span",{className:Object(x.a)({position:"absolute",left:i.spacing(1),right:i.spacing(1),bottom:-i.spacing(1),height:2,backgroundColor:i.palette.common.white})}),r]})}var k=n(33),S=n(188),I=n(194),A=n(168),P=n(192),y=n(193),L=n(97),z=n(85),M=n.n(z),N=n(101);function E(e){return 1e3*(e.expires_in||3300)}var R=n(48);function G(){var e=Object(L.a)(["\n      mutation Signin {\n        signin\n      }\n    "]);return G=function(){return e},e}function T(){var e=Object(p.useState)(!1),t=Object(k.a)(e,2),n=t[0],r=t[1],c=Object(R.b)();return{logIn:function(e){var t=e.onSuccess,n=e.onFailure,r=Object(R.b)(),c=Object(i.useApolloClient)(),a=Object(i.useMutation)(Object(i.gql)(G())),o=Object(k.a)(a,1)[0];function s(e){t(),localStorage.setItem("token",e.getAuthResponse().id_token),c.stop(),c.resetStore().then((function(){return o()})).then((function(t){var n=t.data;!0===(null===n||void 0===n?void 0:n.signin)?function(e){var t=e.getAuthResponse(!0),n=function(){var t=Object(N.a)(M.a.mark((function t(){var r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.reloadAuthResponse();case 2:r=t.sent,localStorage.setItem("token",r.id_token),setTimeout(n,E(r));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();setTimeout(n,E(t))}(e):(localStorage.setItem("token",""),c.resetStore())}))}if(Object(p.useEffect)((function(){r&&r.isSignedIn.get()&&s(r.currentUser.get())}),[r]),!r)return function(){};return function(){r.signIn().then(s,n)}}({onSuccess:function(){return r(!0)},onFailure:function(){return r(!1)}}),logOut:function(e){var t=e.onSuccess,n=Object(R.b)(),r=Object(i.useApolloClient)();if(!n)return function(){};return function(){localStorage.setItem("token",""),r.resetStore(),n.signOut().then((function(){n.disconnect(),t()}))}}({onSuccess:function(){return r(!1)}}),isLoggedIn:n,isLoading:null===c}}function F(){var e=T(),t=e.logIn,n=e.logOut,r=e.isLoggedIn,i=e.isLoading,a=Object(p.useRef)(null),o=Object(p.useState)(!1),s=Object(k.a)(o,2),l=s[0],u=s[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{ref:a,children:r?Object(c.jsx)(b.a,{onClick:function(){return u(!0)},children:Object(c.jsx)(S.a,{})}):Object(c.jsx)(m,{onClick:function(){return u(!0)},children:"Log in"})}),Object(c.jsx)(A.a,{anchorEl:a.current,open:l,onClose:function(){return u(!1)},children:r?Object(c.jsxs)(P.a,{onClick:function(){u(!1),n()},disabled:i,children:[Object(c.jsx)(y.a,{className:Object(x.a)({minWidth:36}),children:Object(c.jsx)(I.a,{fontSize:"small",color:"action"})}),Object(c.jsx)(v.a,{children:"Logout"})]}):Object(c.jsxs)(P.a,{onClick:function(){u(!1),t()},disabled:i,children:[Object(c.jsx)(y.a,{className:Object(x.a)({minWidth:36}),children:Object(c.jsx)(I.a,{fontSize:"small",color:"action"})}),Object(c.jsx)(v.a,{children:"Sign in with Google"})]})})]})}var _=n(127),q=n(195),B=n(81),J=n(80),W=n(79),D=n(82),H={palette:{type:"light",primary:{main:B.a[500]},secondary:{main:J.a.A100},error:{main:W.a[500]},warning:{main:J.a[500]},info:{main:B.a[500]},success:{main:D.a[500]}}};function U(e){var t=e.children,n=function(){var e=Object(l.a)("(prefers-color-scheme: dark)")?"dark":"light",t=Object(p.useState)(localStorage.getItem("palette")),n=Object(k.a)(t,2),r=n[0],c=n[1],i=Object(p.useCallback)((function(){c((function(e){var t="dark"===e?"light":"dark";return localStorage.setItem("palette",t),t}))}),[]);switch(r){case"dark":return["dark",i];case"light":return["light",i];default:return[e,i]}}(),i=Object(k.a)(n,2),a=i[0],o=i[1],s=Object(p.useMemo)((function(){return Object(_.a)(Object(r.a)(Object(r.a)({},H),{},{palette:Object(r.a)(Object(r.a)({},H.palette),{},{type:a})}))}),[a]);return Object(c.jsx)(q.a,{theme:s,children:Object(c.jsx)(Z.Provider,{value:{togglePalette:o},children:t})})}var Z=Object(p.createContext)(null);function K(){var e=Object(s.a)(),t=function(){var e=Object(p.useContext)(Z);if(null==e)throw new Error("missing TogglePaletteContext.Provider");return e}().togglePalette,n=Object(l.a)("(max-width:550px)");return Object(c.jsx)(u.a,{position:"static",color:"light"===e.palette.type?"primary":"default",children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(w,{startIcon:Object(c.jsx)(f,{size:36}),route:"/minder",label:n?"":"Minder"}),Object(c.jsx)(g.a,{s1:!0}),Object(c.jsx)(w,{startIcon:Object(c.jsx)(d.a,{fontSize:"large"}),route:"/minder/memories",label:"Memories"}),Object(c.jsx)(g.a,{s1:!0}),Object(c.jsx)(w,{startIcon:Object(c.jsx)(h.a,{fontSize:"large"}),route:"/minder/standard",label:"Standard"}),Object(c.jsx)(g.a,{s2:!0,grow:!0}),Object(c.jsx)(b.a,{onClick:t,children:Object(c.jsx)(O.a,{})}),Object(c.jsx)(g.a,{s2:!0}),Object(c.jsx)(F,{})]})})}var Q=n(62),V=Object(Q.a)((function(){return Promise.all([n.e(7),n.e(10)]).then(n.bind(null,348))})),X=Object(Q.a)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(1),n.e(9)]).then(n.bind(null,345))})),Y=Object(Q.a)((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(8)]).then(n.bind(null,351))})),$=Object(Q.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,344))}));var ee=function(){return Object(c.jsxs)(a.a,{children:[Object(c.jsx)(K,{}),Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{exact:!0,path:"/minder/",children:Object(c.jsx)(V,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/minder/memories",children:Object(c.jsx)(X,{})}),Object(c.jsx)(o.a,{path:"/minder/standard",children:Object(c.jsx)(Y,{})}),Object(c.jsx)(o.a,{path:"/minder/proposal/:proposalId",children:Object(c.jsx)($,{})})]})]})},te=n(201),ne=n(118),re=n(158),ce=n(14),ie=n.n(ce),ae=n(126),oe=Object(ae.a)((function(e,t){var n,c=t.headers;return{headers:Object(r.a)(Object(r.a)({},c),{},{authorization:null!==(n=localStorage.getItem("token"))&&void 0!==n?n:""})}})),se=new i.ApolloClient({link:oe.concat(Object(i.createHttpLink)({uri:"https://thawing-wildwood-69808.herokuapp.com/graphql"})),cache:new i.InMemoryCache});function le(){return Object(c.jsx)(i.ApolloProvider,{client:se,children:Object(c.jsx)(re.a,{utils:ne.a,children:Object(c.jsx)(R.a,{children:Object(c.jsxs)(U,{children:[Object(c.jsx)(te.a,{}),Object(c.jsx)(ee,{})]})})})})}ie.a.render(Object(c.jsx)(le,{}),document.getElementById("root"))},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(33),c=n(5),i=n(0),a=n(107),o=Object(i.createContext)({googleAuth:null});function s(){var e=Object(i.useContext)(o);if(null==e)throw new Error("missing GoogleAuthContext.Provider");return e.googleAuth}function l(e){var t=e.children,n=function(){var e=Object(i.useState)(null!=gapi.auth2?gapi.auth2.getAuthInstance():null),t=Object(r.a)(e,2),n=t[0],c=t[1];return null==gapi.auth2&&gapi.load("client:auth2",(function(){gapi.client.init(a.a).then((function(){var e=gapi.auth2.getAuthInstance();e.isSignedIn.listen((function(e){var t=gapi.auth2&&gapi.auth2.getAuthInstance();c(null!=t?t:null)})),c(e)}))})),n}();return Object(c.jsx)(o.Provider,{value:{googleAuth:n},children:t})}},55:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(89),c=n(5),i=n(32),a=n(45);function o(e){var t=e.grow,n=void 0!==t&&t,o=Object(r.a)(e,["grow"]),s=Object(a.a)();return Object(c.jsx)("div",{className:Object(i.a)({height:s.spacing(l(o)),flexGrow:n?1:"initial",flexShrink:0})})}function s(e){var t=e.grow,n=void 0!==t&&t,o=Object(r.a)(e,["grow"]),s=Object(a.a)();return Object(c.jsx)("span",{className:Object(i.a)({width:s.spacing(l(o)),flexGrow:n?1:"initial",flexShrink:0})})}function l(e){var t,n,r,c,i,a,o=e.s1,s=e.s2,l=e.s3,u=e.s4,j=e.s8,b=e.s16;return null!==(t=null!==(n=null!==(r=null!==(c=null!==(i=null!==(a=o?1:void 0)&&void 0!==a?a:s?2:void 0)&&void 0!==i?i:l?3:void 0)&&void 0!==c?c:u?4:void 0)&&void 0!==r?r:j?8:void 0)&&void 0!==n?n:b?16:void 0)&&void 0!==t?t:1}}},[[152,4,5]]]);
//# sourceMappingURL=main.dd7ba77c.chunk.js.map