(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[9],{204:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return D}));var a=n(84),r=n.n(a),c=n(40),i=n(33),o=n(101),s=n(203);function l(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}function j(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e){return function(e){var t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(j(t.buffer))}(j(e))}function b(e){return function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),j(n.buffer)}(e))}function O(e){return function(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(j(t.buffer))}(l(e))}function p(e){return u(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),l(n.buffer)}(e))}var f=n(0);function x(){return(x=Object(o.a)(r.a.mark((function e(t,n){var a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.importKey("raw",p(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return c=e.sent,e.next=6,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},c,u(t));case 6:return i=e.sent,e.abrupt("return","".concat(d(a),"!").concat(O(i)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t,n){var a,c,o,s,u,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("!"),c=Object(i.a)(a,2),o=c[0],s=c[1],e.next=3,window.crypto.subtle.importKey("raw",p(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return u=e.sent,e.next=6,window.crypto.subtle.decrypt({name:"AES-GCM",iv:b(o)},u,p(s));case 6:return j=e.sent,e.abrupt("return",l(j));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,e.abrupt("return",O(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)&&44===e.length}function g(e,t){var n=Object(f.useState)(null),a=Object(i.a)(n,2),r=a[0],o=a[1],l=t.title;return Object(f.useEffect)((function(){null!==e&&o(Object(s.d)(e,{title:l}))}),[e,l]),null===r?null:{store:r,updateNodes:function(e){var t=Object(c.a)({},r.nodes);e.forEach((function(e){return t[e.key]=e}));var n={rootNode:Object(c.a)(Object(c.a)({},r.rootNode),{},{updated:new Date}),nodes:t};o(n)}}}function C(e,t){var n=Object(f.useState)(null),a=Object(i.a)(n,2),r=a[0],c=a[1],o=Object(f.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(f.useEffect)((function(){"{"===e[0]?(c(e),u(!1)):function(e,t){return h.apply(this,arguments)}(e,t).then((function(e){c(e),u(!1)})).catch((function(){u(!0),c("{}")}))}),[e,t]),{decryptedData:r,hasFailed:l}}function D(e,t,n){(function(e,t){return x.apply(this,arguments)})(Object(s.c)(e),t).then(n)}},219:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(33),r=n(5),c=n(186),i=n(168),o=n(191),s=n(192),l=n(185),u=n(312),j=n(323),d=n(315),b=n(331),O=n(316),p=n(183),f=n(330),x=n(321),h=n(0),v=n.n(h),y=n(32);function m(e){var t=e.onDelete,n=Object(h.useRef)(null),o=Object(h.useState)(!1),s=Object(a.a)(o,2),l=s[0],u=s[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.a,{onClick:function(){return u(!0)},ref:n,children:Object(r.jsx)(f.a,{})}),Object(r.jsx)(i.a,{anchorEl:n.current,open:l,onClose:function(){return u(!1)},children:Object(r.jsx)(g,{onDelete:function(){t(),u(!1)}})})]})}function g(e){var t=e.onDelete,n=v.a.useState(!1),c=Object(a.a)(n,2),i=c[0],f=c[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.a,{onClick:function(){return f(!0)},children:[Object(r.jsx)(s.a,{classes:{root:Object(y.a)({minWidth:36})},children:Object(r.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(l.a,{children:"Delete"})]}),Object(r.jsxs)(u.a,{open:i,onClose:function(){return f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(r.jsx)(j.a,{id:"alert-dialog-title",children:"Delete this item?"}),Object(r.jsx)(d.a,{children:Object(r.jsx)(b.a,{id:"alert-dialog-description",children:"This action can not be undone, are you sure you want to procced?"})}),Object(r.jsxs)(O.a,{children:[Object(r.jsx)(p.a,{onClick:function(){return f(!1)},color:"primary",children:"No"}),Object(r.jsx)(p.a,{onClick:function(){t(),f(!1)},color:"primary",autoFocus:!0,children:"Yes"})]})]})]})}},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(5),r=n(204),c=n(240),i=n(217),o=n(206),s=n(220),l=n(202),u=n(210),j=n(230),d=n(231),b=n(232),O=n(234),p=n(235),f=n(219);n(0);function x(e){var t=e.vaultData,n=t.title,x=t.encryptionKey,h=t.initialData,v=e.children,y=e.isReadOnly,m=void 0!==y&&y,g=e.onDelete,C=Object(c.b)(),D=Object(r.e)(h,x).decryptedData,w=Object(r.d)(D,{title:n});if(!w)return null;var S=w.store,k=w.updateNodes;return Object(a.jsx)(u.a,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)(c.a.Provider,{value:C,children:Object(a.jsxs)(l.a.Provider,{value:{store:S,encryptionKey:x,updateNodes:m?null:k},children:[Object(a.jsx)(d.a,{header:Object(a.jsx)(i.a,{}),body:Object(a.jsx)(s.a,{nodeKey:S.rootNode.value}),bodyButton:Object(a.jsx)(b.a,{}),info:Object(a.jsx)(j.a,{}),menuButton:Object(a.jsx)(f.a,{onDelete:g}),cardButtons:[Object(a.jsx)(p.a,{}),Object(a.jsx)(O.a,{})]}),v&&v(S)]})})})})}},230:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=(n(0),n(185)),c=n(218),i=n(202);function o(){var e=Object(i.b)().store;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(r.a,{variant:"body2",color:"textSecondary",display:"block",children:["Created: ",Object(c.a)(e.rootNode.created)]}),Object(a.jsxs)(r.a,{variant:"body2",color:"textSecondary",display:"block",children:["Last Updated: ",Object(c.a)(e.rootNode.updated)]})]})}},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),r=n(45),c=n(130),i=n(263),o=n(185),s=n(80),l=(n(0),n(32));function u(e){var t=e.header,n=e.body,u=e.bodyButton,j=e.info,d=e.menuButton,b=e.cardButtons,O=Object(r.a)();return Object(a.jsx)(c.a,{className:Object(l.a)({padding:"".concat(O.spacing(3),"px ").concat(O.spacing(2),"px"),minHeight:300,display:"flex",flexGrow:1}),children:Object(a.jsxs)(i.a,{container:!0,spacing:3,children:[Object(a.jsxs)(i.a,{item:!0,xs:12,lg:9,children:[Object(a.jsxs)("div",{className:Object(l.a)({display:"flex",alignItems:"center"}),children:[t,Object(a.jsx)(s.a,{s1:!0,grow:!0}),u]}),Object(a.jsx)(s.b,{s1:!0}),n]}),Object(a.jsxs)(i.a,{item:!0,xs:12,lg:3,classes:{root:Object(l.a)({display:"flex",flexDirection:"column"})},children:[Object(a.jsx)(o.a,{variant:"h6",gutterBottom:!0,display:"block",children:Object(a.jsxs)("div",{className:Object(l.a)({display:"flex",alignItems:"center"}),children:["Details",Object(a.jsx)(s.a,{s1:!0,grow:!0}),d]})}),j,Object(a.jsx)(s.b,{s2:!0,grow:!0}),Object(a.jsxs)("div",{className:Object(l.a)({display:"flex"}),children:[b[0],Object(a.jsx)(s.a,{s1:!0}),b[1]]})]})]})})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5),r=n(327),c=n(262),i=n(353),o=n(206),s=n(210);function l(){var e=Object(s.b)(),t=e.isEditing,n=e.setIsEditing,l=Object(o.b)().setBreadcrumbs;return t?Object(a.jsx)(i.a,{title:"Unlocked",enterDelay:200,children:Object(a.jsx)(r.a,{onClick:function(){n(!1),l([])}})}):Object(a.jsx)(i.a,{title:"Locked, unlock to edit and move items",enterDelay:1e3,children:Object(a.jsx)(c.a,{onClick:function(){n(!0),l([])}})})}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(0),r=Object(a.createContext)(null);function c(){var e=Object(a.useContext)(r);return null===e||void 0===e?void 0:e.googleResourceId}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(33),r=n(5),c=n(0),i=n(183),o=n(40),s=n(328),l=n(326),u=n(329),j=n(168),d=n(191),b=n(192),O=n(185),p=n(264),f=n(353),x=n(80),h=n(242),v=n(32),y=n(203),m=n(204),g=n(243);function C(e,t,n,a){Object(m.b)(e,t,(function(r){var c=new FormData;c.append("metadata",new Blob([JSON.stringify({name:e.rootNode.title,mimeType:"text/plain;charset=base64",parents:["appDataFolder"],appProperties:{title:e.rootNode.title,encryptionKey:n.withKey?t:void 0}})],{type:"application/json"})),c.append("file",new Blob([r],{type:"text/plain"}));var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&a&&a()},i.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),i.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),i.responseType="json",i.send(c)}))}var D=n(202),w=n(48),S=n(233),k=Object(v.a)({minWidth:36});function I(e){var t,n=e.onClose,a=e.menuProps,c=Object(w.b)();return Object(r.jsxs)(j.a,Object(o.a)(Object(o.a)({},a),{},{children:[Object(r.jsx)(N,{onItemPress:n}),!0===(null===c||void 0===c||null===(t=c.currentUser.get())||void 0===t?void 0:t.isSignedIn())&&Object(r.jsx)(A,{onItemPress:n})]}))}function N(e){var t=e.onItemPress,n=Object(D.b)(),a=n.store,c=n.encryptionKey;return Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsxs)(d.a,{onClick:function(e){t(),Object(m.b)(a,c,(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=base64,"+encodeURIComponent(e)),t.setAttribute("download","data.ish"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(s.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Download"})]}),Object(r.jsx)(p.a,{}),c&&Object(r.jsxs)(d.a,{onClick:function(e){Object(m.b)(a,c,(function(e){navigator.clipboard.writeText(e).then((function(){t()}))}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Copy"})]}),Object(r.jsxs)(d.a,{onClick:function(e){navigator.clipboard.writeText(Object(y.c)(a)).then((function(){t()}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Copy as JSON"})]})]})}function A(e){var t=e.onItemPress,n=Object(S.b)(),a=Object(D.b)(),c=a.store,i=a.encryptionKey;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p.a,{}),i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),C(c,i,{withKey:!1})},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:n?"Save as copy":"Save"})]}),i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),C(c,i,{withKey:!0})},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:n?"Save with key as copy":"Save with key"}),Object(r.jsx)(x.a,{s1:!0}),Object(r.jsx)(f.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(r.jsx)(u.a,{fontSize:"inherit"})})]}),n&&i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),function(e,t,n,a){Object(m.b)(e,t,(function(e){var t=new XMLHttpRequest;t.responseType="json",t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&a&&a()},t.open("PATCH","https://www.googleapis.com/upload/drive/v3/files/".concat(n,"?uploadType=media")),t.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),t.send(e)}))}(c,i,n)},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:"Update"}),Object(r.jsx)(x.a,{s1:!0})]})]})}function T(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{variant:"outlined",fullWidth:!0,size:"small",color:"primary",onClick:function(){return s(!0)},ref:e,children:"Save Data"}),Object(r.jsx)(I,{onClose:function(){return s(!1)},menuProps:{onClose:function(){return s(!1)},open:o,anchorEl:e.current}})]})}},235:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(33),r=n(5),c=n(0),i=n(183),o=n(40),s=n(328),l=n(193),u=n(168),j=n(191),d=n(192),b=n(185),O=n(32),p=n(202),f=Object(O.a)({minWidth:36});function x(e){var t=e.onClose,n=e.menuProps,a=Object(p.b)().encryptionKey;return a?Object(r.jsxs)(u.a,Object(o.a)(Object(o.a)({},n),{},{children:[Object(r.jsxs)(j.a,{onClick:function(){t();var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=base64,".concat(a)),e.setAttribute("download","key.ish"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[Object(r.jsx)(d.a,{className:f,children:Object(r.jsx)(s.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(b.a,{children:"Download"})]}),Object(r.jsxs)(j.a,{onClick:function(){navigator.clipboard.writeText(a).then((function(){t()}))},children:[Object(r.jsx)(d.a,{className:f,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(b.a,{children:"Copy"})]})]})):null}function h(){var e=Object(p.b)().encryptionKey,t=Object(c.useRef)(null),n=Object(c.useState)(!1),o=Object(a.a)(n,2),s=o[0],l=o[1];return e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{variant:"outlined",size:"small",fullWidth:!0,color:"primary",onClick:function(){return l(!0)},ref:t,children:"Save Key"}),Object(r.jsx)(x,{onClose:function(){return l(!1)},menuProps:{onClose:function(){return l(!1)},open:s,anchorEl:t.current}})]}):null}},342:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ue}));var a=n(211),r=n(33),c=n(5),i=n(45),o=n(190),s=n(264),l=n(195),u=n(183),j=n(347),d=n(0),b=n(40),O=n(333),p=n(226),f=n(233);function x(e){var t=e.vaultData,n=e.resourceId,a=e.onDelete;return Object(c.jsx)(f.a.Provider,{value:{googleResourceId:n},children:Object(c.jsx)(p.a,{vaultData:t,onDelete:a})})}var h=n(321),v=n(322),y=n(186),m=n(185),g=n(350),C=n(317),D=n(353),w=n(204),S=n(332);function k(e){var t=e.children,n=e.onDrop;return Object(c.jsx)("div",{onDrop:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n(e.dataTransfer.files[0])})),onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:t})}function I(e,t){if(e){var n=new FileReader;n.onloadend=function(){"string"===typeof n.result&&t(n.result)},n.readAsText(e)}}function N(e){var t=e.encryptionKey,n=e.setEncryptionKey;return Object(c.jsx)(k,{onDrop:function(e){return I(e,n)},children:Object(c.jsx)(g.a,{variant:"outlined",margin:"dense",error:t.length>0&&!Object(w.c)(t),required:!0,fullWidth:!0,label:"Encryption Key",type:"password",autoComplete:"current-encryption-key",value:t,onChange:function(e){return n(e.target.value)},InputProps:{endAdornment:Object(c.jsx)(C.a,{position:"end",children:Object(c.jsx)(D.a,{title:"Generate key",arrow:!0,children:Object(c.jsx)(y.a,{"aria-label":"generate encryption Key",onClick:function(){return Object(w.a)().then(n)},children:Object(c.jsx)(S.a,{fontSize:"small"})})})})}})})}function A(e){var t=e.title,n=e.setTitle;return Object(c.jsx)(g.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Title",autoComplete:"title",value:t,onChange:function(e){return n(e.target.value)},autoFocus:0===t.length})}var T=n(80),K=n(32);function E(e){var t=e.vaultData,n=e.onChange,a=e.onDelete,r=Object(i.a)(),o=t.title,s=t.encryptionKey,l=t.initialData,j=Object(w.e)(l,s).hasFailed;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(y.a,{onClick:a,classes:{root:Object(K.a)({position:"absolute",right:r.spacing(1),top:r.spacing(1)})},children:Object(c.jsx)(h.a,{})}),Object(c.jsx)(m.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(T.b,{s2:!0}),Object(c.jsx)(A,{title:o,setTitle:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{title:e}))}}),Object(c.jsx)(N,{encryptionKey:s,setEncryptionKey:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{encryptionKey:e}))}}),Object(c.jsx)(T.b,{s2:!0,grow:!0}),""!==s&&j&&Object(c.jsx)(m.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:j||0===s.length,color:"primary",size:"medium",startIcon:Object(c.jsx)(v.a,{}),type:"submit",children:"Open"})]})}var P=n(263),R=n(130);function z(e){var t=e.preview,n=e.form,a=e.onSubmit,r=Object(i.a)();return Object(c.jsxs)(P.a,{container:!0,spacing:2,children:[Object(c.jsx)(P.a,{item:!0,xs:12,md:4,xl:3,className:Object(K.a)({display:"flex",minHeight:500}),children:Object(c.jsx)(R.a,{className:Object(K.a)({padding:r.spacing(2),display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}),component:"form",onSubmit:function(){a(),setTimeout((function(){var e=new XMLHttpRequest;e.open("POST","/index.html",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send()}),1)},children:n})}),Object(c.jsx)(P.a,{item:!0,xs:12,md:8,xl:9,className:Object(K.a)({display:"flex"}),children:t})]})}var B=n(217),F=n(206),M=n(220),U=n(202),L=n(230),G=n(231),W=n(232),H=n(234),q=n(235),Y=n(219);function X(e){var t=e.title,n=e.encryptionKey,a=e.initialData,r=Object(i.a)(),o=Object(w.e)(a,n),s=o.decryptedData,l=o.hasFailed,u=""===t?"Title":t,j=Object(w.d)(s,{title:u});if(!j)return null;var d=j.store;return Object(c.jsx)(F.a,{children:Object(c.jsx)(U.a.Provider,{value:{store:d,updateNodes:null,encryptionKey:n},children:Object(c.jsxs)("div",{className:Object(K.a)({display:"flex",flex:1,position:"relative"}),children:[Object(c.jsx)("div",{className:Object(K.a)({backgroundColor:r.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}),children:Object(c.jsx)(m.a,{variant:"h3",children:"Preview"})}),Object(c.jsx)(G.a,{header:Object(c.jsx)(B.a,{}),body:l?Object(c.jsx)(m.a,{variant:"body2",color:"textSecondary",component:"p",children:"Data mismatch"}):Object(c.jsx)(M.a,{nodeKey:d.rootNode.value}),bodyButton:Object(c.jsx)(W.a,{}),info:Object(c.jsx)(L.a,{}),menuButton:Object(c.jsx)(Y.a,{onDelete:function(){}}),cardButtons:[Object(c.jsx)(q.a,{}),Object(c.jsx)(H.a,{})]})]})})})}function J(e){var t=e.vaultData,n=e.onDelete,a=e.onChange,r=e.onSubmit;return Object(c.jsx)(z,{form:Object(c.jsx)(E,{vaultData:t,onChange:a,onDelete:n}),preview:Object(c.jsx)(X,Object(b.a)({},t)),onSubmit:r})}function V(e){var t=e.onDelete,n=Object(i.a)();return Object(c.jsxs)(P.a,{container:!0,spacing:2,children:[Object(c.jsx)(P.a,{item:!0,xs:12,md:4,xl:3,className:Object(K.a)({display:"flex",minHeight:500}),children:Object(c.jsxs)(R.a,{className:Object(K.a)({padding:n.spacing(2),display:"flex",flexDirection:"column",flexGrow:1}),children:[Object(c.jsx)(m.a,{variant:"h4",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(T.b,{s2:!0,grow:!0}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:!0,color:"primary",size:"medium",startIcon:Object(c.jsx)(v.a,{}),children:"Open"})]})}),Object(c.jsx)(P.a,{item:!0,xs:12,md:8,xl:9,className:Object(K.a)({display:"flex"}),children:Object(c.jsxs)(R.a,{className:Object(K.a)({flex:1,position:"relative",overflow:"hidden",padding:n.spacing(3)}),children:[Object(c.jsx)(Y.a,{onDelete:t}),Object(c.jsx)("div",{className:Object(K.a)({backgroundColor:n.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"})})]})})]})}function Z(e){var t=e.card,n=e.setGoogleCards,a=function(){var e;(e=t.resourceId,gapi.client.drive.files.delete({fileId:e})).then((function(){n((function(e){return e.filter((function(e){return t.resourceId!==e.resourceId}))}))}))},r=Object(d.useCallback)((function(e){n((function(n){return n.map((function(n){return n.resourceId===t.resourceId?Object(b.a)(Object(b.a)({},n),{},{vaultData:e}):n}))}))}),[t.resourceId,n]);return t.isLoading?Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(V,{onDelete:a}),Object(c.jsx)(T.b,{s2:!0})]}):t.isCreating?Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(J,{vaultData:t.vaultData,onChange:r,onDelete:a,onSubmit:function(){var e=Object(b.a)(Object(b.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.resourceId===n.resourceId?e:n}))}))}}),Object(c.jsx)(T.b,{s2:!0})]}):Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(x,{vaultData:t.vaultData,onDelete:a,resourceId:t.resourceId}),Object(c.jsx)(T.b,{s2:!0})]})}var _=n(156),Q=n(192),$=n(265),ee=n(97),te=n(34);function ne(){var e=Object(ee.a)(["\n  query MemoryPage {\n    standardProposal {\n      version\n      data\n    }\n  }\n"]);return ne=function(){return e},e}var ae=Object(te.gql)(ne());function re(e){var t=Object(te.useQuery)(ae,{onCompleted:e}).data;return null===t||void 0===t?void 0:t.standardProposal}var ce=n(289);function ie(e){var t,n=e.addCard,a=re(),r={vaultData:{title:"",encryptionKey:"",initialData:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:""},id:Object(ce.a)(),isOpen:!0,isLoading:null==(null===a||void 0===a?void 0:a.data),isCreating:!0,isReadOnly:!0};return Object(c.jsx)(o.a,{component:"nav",children:Object(c.jsxs)(_.a,{button:!0,onClick:function(){return n(r)},children:[Object(c.jsx)(Q.a,{children:Object(c.jsx)(v.a,{})}),Object(c.jsx)($.a,{primary:"Open"})]})})}var oe=n(334),se=n(335),le={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};function ue(e){var t=e.card,n=e.toogleCardVisibility;return Object(c.jsxs)(_.a,{button:!0,onClick:function(){return n(t)},children:[Object(c.jsx)(Q.a,{children:t.isOpen?Object(c.jsx)(oe.a,{}):Object(c.jsx)(se.a,{})}),Object(c.jsx)($.a,{primary:t.vaultData.title,primaryTypographyProps:{style:le}})]},t.id)}function je(e){var t=e.card,n=e.setCards;return Object(c.jsx)(ue,{card:t,toogleCardVisibility:function(e){return n((function(t){return t.map((function(t){return e.id===t.id?Object(b.a)(Object(b.a)({},t),{},{isOpen:!t.isOpen}):t}))}))}})}var de=n(242),be=n(243);function Oe(e){var t=e.card,n=e.onClick;return Object(c.jsxs)(_.a,{button:!0,onClick:n,children:[Object(c.jsxs)(Q.a,{children:[t.isOpen?Object(c.jsx)(oe.a,{}):Object(c.jsx)(se.a,{}),Object(c.jsx)(de.Icon,{icon:be.a,width:12,height:12})]}),Object(c.jsx)($.a,{primary:t.vaultData.title,primaryTypographyProps:{className:Object(K.a)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})}})]},t.resourceId)}function pe(e){var t=e.card,n=e.setGoogleCards;return Object(c.jsx)(Oe,{card:t,onClick:function(){""!==t.vaultData.initialData||t.isLoading?n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(b.a)(Object(b.a)({},e),{},{isOpen:!e.isOpen}):e}))})):(n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(b.a)(Object(b.a)({},e),{},{isLoading:!0,isOpen:!0}):e}))})),gapi.client.drive.files.get({fileId:t.resourceId,alt:"media"}).then((function(e){var a=e.body;n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,isCreating:!0,vaultData:Object(b.a)(Object(b.a)({},e.vaultData),{},{initialData:a})}):e}))}))})))}})}var fe,xe=n(325),he=n(309),ve=n(354),ye=n(338),me=n(344),ge=n(336),Ce=n(337),De=n(329),we=n(339),Se=n(340);function ke(e){var t,n=e.setInitialData,a=Object(i.a)(),o=Object(d.useState)(!1),s=Object(r.a)(o,2),l=s[0],j=s[1],b=Object(d.useState)(fe.STANDARD),p=Object(r.a)(b,2),f=p[0],x=p[1],h=Object(d.useState)(null),v=Object(r.a)(h,2),g=v[0],C=v[1],w=re((function(e){var t=e.standardProposal;f===fe.STANDARD&&n(t.data)}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:Object(K.a)({display:"flex",alignItems:"center",justifyContent:"space-between"}),children:[Object(c.jsx)(m.a,{variant:"body1",children:"Data Options"}),Object(c.jsx)(y.a,{onClick:function(){return j((function(e){return!e}))},"aria-expanded":l,"aria-label":"show more",children:l?Object(c.jsx)(ge.a,{}):Object(c.jsx)(Ce.a,{})})]}),Object(c.jsxs)(O.a,{in:l,timeout:"auto",unmountOnExit:!0,children:[Object(c.jsx)(he.a,{component:"legend",children:"Initial Data"}),Object(c.jsxs)(ve.a,{"aria-label":"Initial data",value:f,onChange:function(e){var t,a=e.target.value;switch(x(a),a){case fe.CUSTOM:return n(null!==g&&void 0!==g?g:"");case fe.EMPTY:return n("{}");case fe.STANDARD:return n(null!==(t=null===w||void 0===w?void 0:w.data)&&void 0!==t?t:"")}},children:[Object(c.jsx)(ye.a,{value:fe.STANDARD,control:Object(c.jsx)(me.a,{size:"small"}),label:"Standard v".concat(null!==(t=null===w||void 0===w?void 0:w.version)&&void 0!==t?t:"*")}),Object(c.jsx)(ye.a,{value:fe.EMPTY,control:Object(c.jsx)(me.a,{size:"small"}),label:"Empty"}),Object(c.jsx)(ye.a,{value:fe.CUSTOM,control:Object(c.jsx)(me.a,{size:"small"}),label:Object(c.jsxs)("span",{className:Object(K.a)({display:"flex",alignItems:"center"}),children:["My own ",Object(c.jsx)(T.a,{s1:!0}),Object(c.jsx)(D.a,{title:"Your encrypted data or a strigfied json",placement:"top",children:Object(c.jsx)(De.a,{fontSize:"inherit"})})]})})]}),fe.CUSTOM===f&&Object(c.jsx)(k,{onDrop:function(e){return I(e,(function(e){C(e),f===fe.CUSTOM&&n(e)}))},children:Object(c.jsxs)(u.a,{component:"label",fullWidth:!0,className:Object(K.a)({textTransform:"none",outlineWidth:2,outlineStyle:"dashed",outlineColor:a.palette.secondary.main}),startIcon:null===g?Object(c.jsx)(we.a,{}):Object(c.jsx)(Se.a,{}),children:[Object(c.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t;return I(null===(t=e.target.files)||void 0===t?void 0:t[0],(function(e){C(e),f===fe.CUSTOM&&n(e)}))}}),null===g?Object(c.jsx)(m.a,{variant:"body1",children:"Drag or upload your data"}):Object(c.jsx)(m.a,{variant:"body1",children:"Done"})]})})]})]})}function Ie(e){var t=e.vaultData,n=e.onChange,a=e.onDelete,r=Object(i.a)(),o=Object(w.e)(t.initialData,t.encryptionKey).hasFailed;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(y.a,{onClick:a,classes:{root:Object(K.a)({position:"absolute",right:r.spacing(1),top:r.spacing(1)})},children:Object(c.jsx)(xe.a,{})}),Object(c.jsx)(m.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(T.b,{s2:!0}),Object(c.jsx)(A,{title:t.title,setTitle:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{title:e}))}}),Object(c.jsx)(N,{encryptionKey:t.encryptionKey,setEncryptionKey:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{encryptionKey:e}))}}),Object(c.jsx)(ke,{setInitialData:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{initialData:e}))}}),Object(c.jsx)(T.b,{s2:!0,grow:!0}),""!==t.initialData&&""!==t.encryptionKey&&o&&Object(c.jsx)(m.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:o||0===t.encryptionKey.length,color:"primary",size:"medium",startIcon:Object(c.jsx)(v.a,{}),type:"submit",children:"Open"})]})}function Ne(e){var t=e.vaultData,n=e.onDelete,a=e.onSubmit,r=e.onChange;return Object(c.jsx)(z,{form:Object(c.jsx)(Ie,{vaultData:t,onChange:r,onDelete:n}),preview:Object(c.jsx)(X,Object(b.a)({},t)),onSubmit:a})}function Ae(e){var t=e.onDataLoaded;return re((function(e){var n=e.standardProposal;t(n.data)})),Object(c.jsx)(D.a,{title:"This app uses a free tier Heroku Dyno and will sleep after 30 minutes of inactivity",arrow:!0,children:Object(c.jsx)(m.a,{variant:"body1",display:"inline",children:"Warming up the server just for you..."})})}function Te(e){var t=e.card,n=e.setCards,a=function(){n((function(e){return e.filter((function(e){return t.id!==e.id}))}))};return t.isLoading?Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(Ae,{onDataLoaded:function(e){return n((function(n){return n.map((function(n){return n.id===t.id?Object(b.a)(Object(b.a)({},n),{},{vaultData:Object(b.a)(Object(b.a)({},n.vaultData),{},{initialData:e}),isLoading:!1}):n}))}))}}),Object(c.jsx)(T.b,{s2:!0})]}):t.isCreating?Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(Ne,{vaultData:t.vaultData,onSubmit:function(){var e=Object(b.a)(Object(b.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.id===n.id?e:n}))}))},onDelete:a,onChange:function(e){n((function(n){return n.map((function(n){return n.id===t.id?Object(b.a)(Object(b.a)({},n),{},{vaultData:e}):n}))}))}}),Object(c.jsx)(T.b,{s2:!0})]}):Object(c.jsxs)(O.a,{in:t.isOpen,children:[Object(c.jsx)(p.a,{vaultData:t.vaultData,isReadOnly:t.isReadOnly,onDelete:a}),Object(c.jsx)(T.b,{s2:!0})]})}!function(e){e.STANDARD="STANDARD",e.EMPTY="EMPTY",e.CUSTOM="CUSTOM"}(fe||(fe={}));var Ke=n(330),Ee=n(107),Pe=n(48);function Re(e){var t=Object(Pe.b)();Object(d.useEffect)((function(){null!==t&&t.isSignedIn.get()||e([])}),[t,e]);var n=function(e){var t=Object(Pe.b)(),n=null===t||void 0===t?void 0:t.currentUser.get();if(!n||!n.isSignedIn())return!1;var a=n.hasGrantedScopes(e);return a||n.grant({scope:e}),a}(Ee.b);Object(d.useEffect)((function(){n&&gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, appProperties)",pageSize:100}).then((function(t){var n;e(null!==(n=t.result.files)&&void 0!==n?n:[])}))}),[n,e])}function ze(e){var t,n,a,r,c;return{resourceId:null!==(t=e.id)&&void 0!==t?t:"",vaultData:{title:null!==(n=null===(a=e.appProperties)||void 0===a?void 0:a.title)&&void 0!==n?n:"",encryptionKey:null!==(r=null===(c=e.appProperties)||void 0===c?void 0:c.encryptionKey)&&void 0!==r?r:"",initialData:""},isLoading:!1,isCreating:!1,isOpen:!1}}var Be=n(276),Fe=n.n(Be),Me=n(16);function Ue(){var e=Object(i.a)(),t=Object(d.useState)([]),n=Object(r.a)(t,2),b=n[0],O=n[1];!function(e){Re(Object(d.useCallback)((function(t){var n=t.map(ze);e(n)}),[e]))}(O);var p=Object(d.useState)([]),f=Object(r.a)(p,2),x=f[0],h=f[1];!function(e){var t=Object(Me.g)().search;Object(d.useEffect)((function(){var n,r=Fe.a.parse(t);if(null!=r.key||null!=r.data){var c=null==r.key||null==r.data,i={id:Object(ce.a)(),isOpen:!0,isReadOnly:!!c||"false"!==r.readOnly,isCreating:c,isLoading:!1,vaultData:{title:null!==(n=r.title)&&void 0!==n?n:"",encryptionKey:r.key?r.key.split(" ").join("+"):"",initialData:r.data?r.data.split(" ").join("+"):""}};e((function(e){return[i].concat(Object(a.a)(e))}))}}),[t,e])}(h);var v=x.filter((function(e){return!e.isCreating})),y=[Object(c.jsx)(ie,{addCard:function(e){return h((function(t){return[e].concat(Object(a.a)(t))}))}},"PreviewCardNavBar"),v.length>0&&Object(c.jsx)(o.a,{component:"nav",children:v.map((function(e){return Object(c.jsx)(je,{card:e,setCards:h},e.id)}))},"CardNavBar"),b.length>0&&Object(c.jsx)(o.a,{component:"nav",children:b.map((function(e){return Object(c.jsx)(pe,{card:e,setGoogleCards:O},e.resourceId)}))},"GoogleCardsNavBar")].map((function(e,t,n){return t===n.length-1?e:[e,Object(c.jsx)(s.a,{},"LeftNavSection-".concat(t))]})),m=[].concat(Object(a.a)(x.map((function(e){return Object(c.jsx)(Te,{card:e,setCards:h},e.id)}))),Object(a.a)(b.map((function(e){return Object(c.jsx)(Z,{card:e,setGoogleCards:O},e.resourceId)})))),g=Object(l.a)(e.breakpoints.up("sm")),C=Object(l.a)(e.breakpoints.up("xl")),D=Object(d.useState)(!0),w=Object(r.a)(D,2),S=w[0],k=w[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:Object(K.a)({display:"flex",flexGrow:1}),children:[g?Object(c.jsx)("div",{className:Object(K.a)({flexBasis:200,flexShrink:0,borderRightColor:e.palette.divider,borderRightWidth:1,borderRightStyle:"solid"}),children:y}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.a,{onClick:function(){return k(!0)},classes:{root:Object(K.a)({borderRadius:0,borderInlineEndWidth:1,borderInlineEndStyle:"solid",borderInlineEndColor:e.palette.divider})},children:Object(c.jsx)(Ke.a,{})}),Object(c.jsx)(j.a,{anchor:"left",open:S,onClose:function(){return k(!1)},onOpen:function(){return k(!0)},classes:{paper:Object(K.a)({minWidth:250})},children:y})]}),Object(c.jsx)("div",{className:Object(K.a)({padding:e.spacing(2),flexGrow:1}),children:m}),C&&Object(c.jsx)("div",{className:Object(K.a)({flexBasis:250})})]})})}}}]);
//# sourceMappingURL=9.8d522461.chunk.js.map