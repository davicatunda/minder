(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[9],{206:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return C})),n.d(t,"b",(function(){return D}));var a=n(85),r=n.n(a),c=n(40),i=n(33),o=n(101),s=n(205);function l(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}function j(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e){return function(e){var t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(j(t.buffer))}(j(e))}function b(e){return function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),j(n.buffer)}(e))}function O(e){return function(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,n,a){a[n]=e.charCodeAt(n)})),btoa(j(t.buffer))}(l(e))}function f(e){return u(function(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(n,(function(e,n,a){a[n]=t.charCodeAt(n)})),l(n.buffer)}(e))}var p=n(0);function x(){return(x=Object(o.a)(r.a.mark((function e(t,n){var a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.crypto.getRandomValues(new Uint8Array(12)),e.next=3,window.crypto.subtle.importKey("raw",f(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return c=e.sent,e.next=6,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},c,u(t));case 6:return i=e.sent,e.abrupt("return","".concat(d(a),"!").concat(O(i)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t,n){var a,c,o,s,u,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("!"),c=Object(i.a)(a,2),o=c[0],s=c[1],e.next=3,window.crypto.subtle.importKey("raw",f(n),{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 3:return u=e.sent,e.next=6,window.crypto.subtle.decrypt({name:"AES-GCM",iv:b(o)},u,f(s));case 6:return j=e.sent,e.abrupt("return",l(j));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("raw",t);case 5:return n=e.sent,e.abrupt("return",O(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e)&&44===e.length}function g(e,t){var n=Object(p.useState)(null),a=Object(i.a)(n,2),r=a[0],o=a[1],l=t.title;return Object(p.useEffect)((function(){null!==e&&o(Object(s.d)(e,{title:l}))}),[e,l]),null===r?null:{store:r,updateNodes:function(e){var t=Object(c.a)({},r.nodes);e.forEach((function(e){return t[e.key]=e}));var n={rootNode:Object(c.a)(Object(c.a)({},r.rootNode),{},{updated:new Date}),nodes:t};o(n)}}}function C(e,t){var n=Object(p.useState)(null),a=Object(i.a)(n,2),r=a[0],c=a[1],o=Object(p.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(p.useEffect)((function(){"{"===e[0]?(c(e),u(!1)):function(e,t){return h.apply(this,arguments)}(e,t).then((function(e){c(e),u(!1)})).catch((function(){u(!0),c("{}")}))}),[e,t]),{decryptedData:r,hasFailed:l}}function D(e,t,n){(function(e,t){return x.apply(this,arguments)})(Object(s.c)(e),t).then(n)}},221:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(33),r=n(5),c=n(187),i=n(168),o=n(192),s=n(193),l=n(185),u=n(314),j=n(325),d=n(317),b=n(333),O=n(318),f=n(183),p=n(332),x=n(323),h=n(0),v=n.n(h),y=n(32);function m(e){var t=e.onDelete,n=Object(h.useRef)(null),o=Object(h.useState)(!1),s=Object(a.a)(o,2),l=s[0],u=s[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.a,{onClick:function(){return u(!0)},ref:n,children:Object(r.jsx)(p.a,{})}),Object(r.jsx)(i.a,{anchorEl:n.current,open:l,onClose:function(){return u(!1)},children:Object(r.jsx)(g,{onDelete:function(){t(),u(!1)}})})]})}function g(e){var t=e.onDelete,n=v.a.useState(!1),c=Object(a.a)(n,2),i=c[0],p=c[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.a,{onClick:function(){return p(!0)},children:[Object(r.jsx)(s.a,{classes:{root:Object(y.a)({minWidth:36})},children:Object(r.jsx)(x.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(l.a,{children:"Delete"})]}),Object(r.jsxs)(u.a,{open:i,onClose:function(){return p(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(r.jsx)(j.a,{id:"alert-dialog-title",children:"Delete this item?"}),Object(r.jsx)(d.a,{children:Object(r.jsx)(b.a,{id:"alert-dialog-description",children:"This action can not be undone, are you sure you want to procced?"})}),Object(r.jsxs)(O.a,{children:[Object(r.jsx)(f.a,{onClick:function(){return p(!1)},color:"primary",children:"No"}),Object(r.jsx)(f.a,{onClick:function(){t(),p(!1)},color:"primary",autoFocus:!0,children:"Yes"})]})]})]})}},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(5),r=n(206),c=n(242),i=n(219),o=n(208),s=n(222),l=n(204),u=n(212),j=n(232),d=n(233),b=n(234),O=n(236),f=n(237),p=n(221);n(0);function x(e){var t=e.vaultData,n=t.title,x=t.encryptionKey,h=t.initialData,v=e.children,y=e.isReadOnly,m=void 0!==y&&y,g=e.onDelete,C=Object(c.b)(),D=Object(r.e)(h,x).decryptedData,w=Object(r.d)(D,{title:n});if(!w)return null;var S=w.store,k=w.updateNodes;return Object(a.jsx)(u.a,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)(c.a.Provider,{value:C,children:Object(a.jsxs)(l.a.Provider,{value:{store:S,encryptionKey:x,updateNodes:m?null:k},children:[Object(a.jsx)(d.a,{header:Object(a.jsx)(i.a,{}),body:Object(a.jsx)(s.a,{nodeKey:S.rootNode.value}),bodyButton:Object(a.jsx)(b.a,{}),info:Object(a.jsx)(j.a,{}),menuButton:Object(a.jsx)(p.a,{onDelete:g}),cardButtons:[Object(a.jsx)(f.a,{}),Object(a.jsx)(O.a,{})]}),v&&v(S)]})})})})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=(n(0),n(185)),c=n(220),i=n(204);function o(){var e=Object(i.b)().store;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(r.a,{variant:"body2",color:"textSecondary",display:"block",children:["Created: ",Object(c.a)(e.rootNode.created)]}),Object(a.jsxs)(r.a,{variant:"body2",color:"textSecondary",display:"block",children:["Last Updated: ",Object(c.a)(e.rootNode.updated)]})]})}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),r=n(45),c=n(130),i=n(265),o=n(185),s=n(55),l=(n(0),n(32));function u(e){var t=e.header,n=e.body,u=e.bodyButton,j=e.info,d=e.menuButton,b=e.cardButtons,O=Object(r.a)();return Object(a.jsx)(c.a,{className:Object(l.a)({padding:"".concat(O.spacing(3),"px ").concat(O.spacing(2),"px"),minHeight:300,display:"flex",flexGrow:1}),children:Object(a.jsxs)(i.a,{container:!0,spacing:3,children:[Object(a.jsxs)(i.a,{item:!0,xs:12,lg:9,children:[Object(a.jsxs)("div",{className:Object(l.a)({display:"flex",alignItems:"center"}),children:[t,Object(a.jsx)(s.a,{s1:!0,grow:!0}),u]}),Object(a.jsx)(s.b,{s1:!0}),n]}),Object(a.jsxs)(i.a,{item:!0,xs:12,lg:3,classes:{root:Object(l.a)({display:"flex",flexDirection:"column"})},children:[Object(a.jsx)(o.a,{variant:"h6",gutterBottom:!0,display:"block",children:Object(a.jsxs)("div",{className:Object(l.a)({display:"flex",alignItems:"center"}),children:["Details",Object(a.jsx)(s.a,{s1:!0,grow:!0}),d]})}),j,Object(a.jsx)(s.b,{s2:!0,grow:!0}),Object(a.jsxs)("div",{className:Object(l.a)({display:"flex"}),children:[b[0],Object(a.jsx)(s.a,{s1:!0}),b[1]]})]})]})})}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5),r=n(329),c=n(264),i=n(356),o=n(208),s=n(212);function l(){var e=Object(s.b)(),t=e.isEditing,n=e.setIsEditing,l=Object(o.b)().setBreadcrumbs;return t?Object(a.jsx)(i.a,{title:"Unlocked",enterDelay:200,children:Object(a.jsx)(r.a,{onClick:function(){n(!1),l([])}})}):Object(a.jsx)(i.a,{title:"Locked, unlock to edit and move items",enterDelay:1e3,children:Object(a.jsx)(c.a,{onClick:function(){n(!0),l([])}})})}},235:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(0),r=Object(a.createContext)(null);function c(){var e=Object(a.useContext)(r);return null===e||void 0===e?void 0:e.googleResourceId}},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(33),r=n(5),c=n(0),i=n(183),o=n(40),s=n(330),l=n(328),u=n(331),j=n(168),d=n(192),b=n(193),O=n(185),f=n(266),p=n(356),x=n(55),h=n(244),v=n(32),y=n(205),m=n(206),g=n(245);function C(e,t,n,a){Object(m.b)(e,t,(function(r){var c=new FormData;c.append("metadata",new Blob([JSON.stringify({name:e.rootNode.title,mimeType:"text/plain;charset=base64",parents:["appDataFolder"],appProperties:{title:e.rootNode.title,encryptionKey:n.withKey?t:void 0}})],{type:"application/json"})),c.append("file",new Blob([r],{type:"text/plain"}));var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&a&&a()},i.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),i.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),i.responseType="json",i.send(c)}))}var D=n(204),w=n(48),S=n(235),k=Object(v.a)({minWidth:36});function I(e){var t,n=e.onClose,a=e.menuProps,c=Object(w.b)();return Object(r.jsxs)(j.a,Object(o.a)(Object(o.a)({},a),{},{children:[Object(r.jsx)(N,{onItemPress:n}),!0===(null===c||void 0===c||null===(t=c.currentUser.get())||void 0===t?void 0:t.isSignedIn())&&Object(r.jsx)(A,{onItemPress:n})]}))}function N(e){var t=e.onItemPress,n=Object(D.b)(),a=n.store,c=n.encryptionKey;return Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsxs)(d.a,{onClick:function(e){t(),Object(m.b)(a,c,(function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=base64,"+encodeURIComponent(e)),t.setAttribute("download","data.ish"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(s.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Download"})]}),Object(r.jsx)(f.a,{}),c&&Object(r.jsxs)(d.a,{onClick:function(e){Object(m.b)(a,c,(function(e){navigator.clipboard.writeText(e).then((function(){t()}))}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Copy"})]}),Object(r.jsxs)(d.a,{onClick:function(e){navigator.clipboard.writeText(Object(y.c)(a)).then((function(){t()}))},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(O.a,{children:"Copy as JSON"})]})]})}function A(e){var t=e.onItemPress,n=Object(S.b)(),a=Object(D.b)(),c=a.store,i=a.encryptionKey;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.a,{}),i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),C(c,i,{withKey:!1})},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:n?"Save as copy":"Save"})]}),i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),C(c,i,{withKey:!0})},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:n?"Save with key as copy":"Save with key"}),Object(r.jsx)(x.a,{s1:!0}),Object(r.jsx)(p.a,{title:"This option is not recommended as it relies on your Google account not being compromised, prefer saving your key offline for extra safety",placement:"bottom",children:Object(r.jsx)(u.a,{fontSize:"inherit"})})]}),n&&i&&Object(r.jsxs)(d.a,{onClick:function(e){t(),function(e,t,n,a){Object(m.b)(e,t,(function(e){var t=new XMLHttpRequest;t.responseType="json",t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&a&&a()},t.open("PATCH","https://www.googleapis.com/upload/drive/v3/files/".concat(n,"?uploadType=media")),t.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),t.send(e)}))}(c,i,n)},children:[Object(r.jsx)(b.a,{className:k,children:Object(r.jsx)(h.Icon,{icon:g.a,width:20,height:20})}),Object(r.jsx)(O.a,{children:"Update"}),Object(r.jsx)(x.a,{s1:!0})]})]})}function T(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{variant:"outlined",fullWidth:!0,size:"small",color:"primary",onClick:function(){return s(!0)},ref:e,children:"Save Data"}),Object(r.jsx)(I,{onClose:function(){return s(!1)},menuProps:{onClose:function(){return s(!1)},open:o,anchorEl:e.current}})]})}},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(33),r=n(5),c=n(0),i=n(183),o=n(40),s=n(330),l=n(194),u=n(168),j=n(192),d=n(193),b=n(185),O=n(32),f=n(204),p=Object(O.a)({minWidth:36});function x(e){var t=e.onClose,n=e.menuProps,a=Object(f.b)().encryptionKey;return a?Object(r.jsxs)(u.a,Object(o.a)(Object(o.a)({},n),{},{children:[Object(r.jsxs)(j.a,{onClick:function(){t();var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=base64,".concat(a)),e.setAttribute("download","key.ish"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[Object(r.jsx)(d.a,{className:p,children:Object(r.jsx)(s.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(b.a,{children:"Download"})]}),Object(r.jsxs)(j.a,{onClick:function(){navigator.clipboard.writeText(a).then((function(){t()}))},children:[Object(r.jsx)(d.a,{className:p,children:Object(r.jsx)(l.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(b.a,{children:"Copy"})]})]})):null}function h(){var e=Object(f.b)().encryptionKey,t=Object(c.useRef)(null),n=Object(c.useState)(!1),o=Object(a.a)(n,2),s=o[0],l=o[1];return e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{variant:"outlined",size:"small",fullWidth:!0,color:"primary",onClick:function(){return l(!0)},ref:t,children:"Save Key"}),Object(r.jsx)(x,{onClose:function(){return l(!1)},menuProps:{onClose:function(){return l(!1)},open:s,anchorEl:t.current}})]}):null}},345:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ue}));var a=n(213),r=n(33),c=n(5),i=n(45),o=n(191),s=n(266),l=n(186),u=n(183),j=n(350),d=n(0),b=n(343),O=n(40),f=n(335),p=n(228),x=n(235);function h(e){var t=e.vaultData,n=e.resourceId,a=e.onDelete;return Object(c.jsx)(x.a.Provider,{value:{googleResourceId:n},children:Object(c.jsx)(p.a,{vaultData:t,onDelete:a})})}var v=n(323),y=n(324),m=n(187),g=n(185),C=n(353),D=n(319),w=n(356),S=n(206),k=n(334);function I(e){var t=e.children,n=e.onDrop;return Object(c.jsx)("div",{onDrop:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n(e.dataTransfer.files[0])})),onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},children:t})}function N(e,t){if(e){var n=new FileReader;n.onloadend=function(){"string"===typeof n.result&&t(n.result)},n.readAsText(e)}}function A(e){var t=e.encryptionKey,n=e.setEncryptionKey;return Object(c.jsx)(I,{onDrop:function(e){return N(e,n)},children:Object(c.jsx)(C.a,{variant:"outlined",margin:"dense",error:t.length>0&&!Object(S.c)(t),required:!0,fullWidth:!0,label:"Encryption Key",type:"password",autoComplete:"current-encryption-key",value:t,onChange:function(e){return n(e.target.value)},InputProps:{endAdornment:Object(c.jsx)(D.a,{position:"end",children:Object(c.jsx)(w.a,{title:"Generate key",arrow:!0,children:Object(c.jsx)(m.a,{"aria-label":"generate encryption Key",onClick:function(){return Object(S.a)().then(n)},children:Object(c.jsx)(k.a,{fontSize:"small"})})})})}})})}function T(e){var t=e.title,n=e.setTitle;return Object(c.jsx)(C.a,{variant:"outlined",margin:"dense",fullWidth:!0,label:"Title",autoComplete:"title",value:t,onChange:function(e){return n(e.target.value)},autoFocus:0===t.length})}var K=n(55),P=n(32);function E(e){var t=e.vaultData,n=e.onChange,a=e.onDelete,r=Object(i.a)(),o=t.title,s=t.encryptionKey,l=t.initialData,j=Object(S.e)(l,s).hasFailed;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.a,{onClick:a,classes:{root:Object(P.a)({position:"absolute",right:r.spacing(1),top:r.spacing(1)})},children:Object(c.jsx)(v.a,{})}),Object(c.jsx)(g.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(K.b,{s2:!0}),Object(c.jsx)(T,{title:o,setTitle:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{title:e}))}}),Object(c.jsx)(A,{encryptionKey:s,setEncryptionKey:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{encryptionKey:e}))}}),Object(c.jsx)(K.b,{s2:!0,grow:!0}),""!==s&&j&&Object(c.jsx)(g.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:j||0===s.length,color:"primary",size:"medium",startIcon:Object(c.jsx)(y.a,{}),type:"submit",children:"Open"})]})}var R=n(265),B=n(130);function z(e){var t=e.preview,n=e.form,a=e.onSubmit,r=Object(i.a)();return Object(c.jsxs)(R.a,{container:!0,spacing:2,children:[Object(c.jsx)(R.a,{item:!0,xs:12,md:4,xl:3,className:Object(P.a)({display:"flex",minHeight:500}),children:Object(c.jsx)(B.a,{className:Object(P.a)({padding:r.spacing(2),display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}),component:"form",onSubmit:function(){a(),setTimeout((function(){var e=new XMLHttpRequest;e.open("POST","/index.html",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send()}),1)},children:n})}),Object(c.jsx)(R.a,{item:!0,xs:12,md:8,xl:9,className:Object(P.a)({display:"flex"}),children:t})]})}var F=n(219),M=n(208),U=n(222),L=n(204),G=n(232),W=n(233),H=n(234),q=n(236),Y=n(237),X=n(221);function J(e){var t=e.title,n=e.encryptionKey,a=e.initialData,r=Object(i.a)(),o=Object(S.e)(a,n),s=o.decryptedData,l=o.hasFailed,u=""===t?"Title":t,j=Object(S.d)(s,{title:u});if(!j)return null;var d=j.store;return Object(c.jsx)(M.a,{children:Object(c.jsx)(L.a.Provider,{value:{store:d,updateNodes:null,encryptionKey:n},children:Object(c.jsxs)("div",{className:Object(P.a)({display:"flex",flex:1,position:"relative"}),children:[Object(c.jsx)("div",{className:Object(P.a)({backgroundColor:r.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"}),children:Object(c.jsx)(g.a,{variant:"h3",children:"Preview"})}),Object(c.jsx)(W.a,{header:Object(c.jsx)(F.a,{}),body:l?Object(c.jsx)(g.a,{variant:"body2",color:"textSecondary",component:"p",children:"Data mismatch"}):Object(c.jsx)(U.a,{nodeKey:d.rootNode.value}),bodyButton:Object(c.jsx)(H.a,{}),info:Object(c.jsx)(G.a,{}),menuButton:Object(c.jsx)(X.a,{onDelete:function(){}}),cardButtons:[Object(c.jsx)(Y.a,{}),Object(c.jsx)(q.a,{})]})]})})})}function V(e){var t=e.vaultData,n=e.onDelete,a=e.onChange,r=e.onSubmit;return Object(c.jsx)(z,{form:Object(c.jsx)(E,{vaultData:t,onChange:a,onDelete:n}),preview:Object(c.jsx)(J,Object(O.a)({},t)),onSubmit:r})}function Z(e){var t=e.onDelete,n=Object(i.a)();return Object(c.jsxs)(R.a,{container:!0,spacing:2,children:[Object(c.jsx)(R.a,{item:!0,xs:12,md:4,xl:3,className:Object(P.a)({display:"flex",minHeight:500}),children:Object(c.jsxs)(B.a,{className:Object(P.a)({padding:n.spacing(2),display:"flex",flexDirection:"column",flexGrow:1}),children:[Object(c.jsx)(g.a,{variant:"h4",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(K.b,{s2:!0,grow:!0}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:!0,color:"primary",size:"medium",startIcon:Object(c.jsx)(y.a,{}),children:"Open"})]})}),Object(c.jsx)(R.a,{item:!0,xs:12,md:8,xl:9,className:Object(P.a)({display:"flex"}),children:Object(c.jsxs)(B.a,{className:Object(P.a)({flex:1,position:"relative",overflow:"hidden",padding:n.spacing(3)}),children:[Object(c.jsx)(X.a,{onDelete:t}),Object(c.jsx)("div",{className:Object(P.a)({backgroundColor:n.palette.background.default,opacity:.8,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"})})]})})]})}function _(e){var t=e.card,n=e.setGoogleCards,a=function(){var e;(e=t.resourceId,gapi.client.drive.files.delete({fileId:e})).then((function(){n((function(e){return e.filter((function(e){return t.resourceId!==e.resourceId}))}))}))},r=Object(d.useCallback)((function(e){n((function(n){return n.map((function(n){return n.resourceId===t.resourceId?Object(O.a)(Object(O.a)({},n),{},{vaultData:e}):n}))}))}),[t.resourceId,n]);return t.isLoading?Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(Z,{onDelete:a}),Object(c.jsx)(K.b,{s2:!0})]}):t.isCreating?Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(V,{vaultData:t.vaultData,onChange:r,onDelete:a,onSubmit:function(){var e=Object(O.a)(Object(O.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.resourceId===n.resourceId?e:n}))}))}}),Object(c.jsx)(K.b,{s2:!0})]}):Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(h,{vaultData:t.vaultData,onDelete:a,resourceId:t.resourceId}),Object(c.jsx)(K.b,{s2:!0})]})}var Q=n(156),$=n(193),ee=n(267),te=n(97),ne=n(34);function ae(){var e=Object(te.a)(["\n  query MemoryPage {\n    standardProposal {\n      version\n      data\n    }\n  }\n"]);return ae=function(){return e},e}var re=Object(ne.gql)(ae());function ce(e){var t=Object(ne.useQuery)(re,{onCompleted:e}).data;return null===t||void 0===t?void 0:t.standardProposal}var ie=n(291);function oe(e){var t,n=e.addCard,a=ce(),r={vaultData:{title:"",encryptionKey:"",initialData:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:""},id:Object(ie.a)(),isOpen:!0,isLoading:null==(null===a||void 0===a?void 0:a.data),isCreating:!0,isReadOnly:!0};return Object(c.jsx)(o.a,{component:"nav",children:Object(c.jsxs)(Q.a,{button:!0,onClick:function(){return n(r)},children:[Object(c.jsx)($.a,{children:Object(c.jsx)(y.a,{})}),Object(c.jsx)(ee.a,{primary:"Open"})]})})}var se=n(336),le=n(337),ue={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};function je(e){var t=e.card,n=e.toogleCardVisibility;return Object(c.jsxs)(Q.a,{button:!0,onClick:function(){return n(t)},children:[Object(c.jsx)($.a,{children:t.isOpen?Object(c.jsx)(se.a,{}):Object(c.jsx)(le.a,{})}),Object(c.jsx)(ee.a,{primary:t.vaultData.title,primaryTypographyProps:{style:ue}})]},t.id)}function de(e){var t=e.card,n=e.setCards;return Object(c.jsx)(je,{card:t,toogleCardVisibility:function(e){return n((function(t){return t.map((function(t){return e.id===t.id?Object(O.a)(Object(O.a)({},t),{},{isOpen:!t.isOpen}):t}))}))}})}var be=n(244),Oe=n(245);function fe(e){var t=e.card,n=e.onClick;return Object(c.jsxs)(Q.a,{button:!0,onClick:n,children:[Object(c.jsxs)($.a,{children:[t.isOpen?Object(c.jsx)(se.a,{}):Object(c.jsx)(le.a,{}),Object(c.jsx)(be.Icon,{icon:Oe.a,width:12,height:12})]}),Object(c.jsx)(ee.a,{primary:t.vaultData.title,primaryTypographyProps:{className:Object(P.a)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})}})]},t.resourceId)}function pe(e){var t=e.card,n=e.setGoogleCards;return Object(c.jsx)(fe,{card:t,onClick:function(){""!==t.vaultData.initialData||t.isLoading?n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(O.a)(Object(O.a)({},e),{},{isOpen:!e.isOpen}):e}))})):(n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(O.a)(Object(O.a)({},e),{},{isLoading:!0,isOpen:!0}):e}))})),gapi.client.drive.files.get({fileId:t.resourceId,alt:"media"}).then((function(e){var a=e.body;n((function(e){return e.map((function(e){return t.resourceId===e.resourceId?Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,isCreating:!0,vaultData:Object(O.a)(Object(O.a)({},e.vaultData),{},{initialData:a})}):e}))}))})))}})}var xe,he=n(327),ve=n(311),ye=n(357),me=n(340),ge=n(347),Ce=n(338),De=n(339),we=n(331),Se=n(341),ke=n(342);function Ie(e){var t,n=e.setInitialData,a=Object(i.a)(),o=Object(d.useState)(!1),s=Object(r.a)(o,2),l=s[0],j=s[1],b=Object(d.useState)(xe.STANDARD),O=Object(r.a)(b,2),p=O[0],x=O[1],h=Object(d.useState)(null),v=Object(r.a)(h,2),y=v[0],C=v[1],D=ce((function(e){var t=e.standardProposal;p===xe.STANDARD&&n(t.data)}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:Object(P.a)({display:"flex",alignItems:"center",justifyContent:"space-between"}),children:[Object(c.jsx)(g.a,{variant:"body1",children:"Data Options"}),Object(c.jsx)(m.a,{onClick:function(){return j((function(e){return!e}))},"aria-expanded":l,"aria-label":"show more",children:l?Object(c.jsx)(Ce.a,{}):Object(c.jsx)(De.a,{})})]}),Object(c.jsxs)(f.a,{in:l,timeout:"auto",unmountOnExit:!0,children:[Object(c.jsx)(ve.a,{component:"legend",children:"Initial Data"}),Object(c.jsxs)(ye.a,{"aria-label":"Initial data",value:p,onChange:function(e){var t,a=e.target.value;switch(x(a),a){case xe.CUSTOM:return n(null!==y&&void 0!==y?y:"");case xe.EMPTY:return n("{}");case xe.STANDARD:return n(null!==(t=null===D||void 0===D?void 0:D.data)&&void 0!==t?t:"")}},children:[Object(c.jsx)(me.a,{value:xe.STANDARD,control:Object(c.jsx)(ge.a,{size:"small"}),label:"Standard v".concat(null!==(t=null===D||void 0===D?void 0:D.version)&&void 0!==t?t:"*")}),Object(c.jsx)(me.a,{value:xe.EMPTY,control:Object(c.jsx)(ge.a,{size:"small"}),label:"Empty"}),Object(c.jsx)(me.a,{value:xe.CUSTOM,control:Object(c.jsx)(ge.a,{size:"small"}),label:Object(c.jsxs)("span",{className:Object(P.a)({display:"flex",alignItems:"center"}),children:["My own ",Object(c.jsx)(K.a,{s1:!0}),Object(c.jsx)(w.a,{title:"Your encrypted data or a strigfied json",placement:"top",children:Object(c.jsx)(we.a,{fontSize:"inherit"})})]})})]}),xe.CUSTOM===p&&Object(c.jsx)(I,{onDrop:function(e){return N(e,(function(e){C(e),p===xe.CUSTOM&&n(e)}))},children:Object(c.jsxs)(u.a,{component:"label",fullWidth:!0,className:Object(P.a)({textTransform:"none",outlineWidth:2,outlineStyle:"dashed",outlineColor:a.palette.secondary.main}),startIcon:null===y?Object(c.jsx)(Se.a,{}):Object(c.jsx)(ke.a,{}),children:[Object(c.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t;return N(null===(t=e.target.files)||void 0===t?void 0:t[0],(function(e){C(e),p===xe.CUSTOM&&n(e)}))}}),null===y?Object(c.jsx)(g.a,{variant:"body1",children:"Drag or upload your data"}):Object(c.jsx)(g.a,{variant:"body1",children:"Done"})]})})]})]})}function Ne(e){var t=e.vaultData,n=e.onChange,a=e.onDelete,r=Object(i.a)(),o=Object(S.e)(t.initialData,t.encryptionKey).hasFailed;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.a,{onClick:a,classes:{root:Object(P.a)({position:"absolute",right:r.spacing(1),top:r.spacing(1)})},children:Object(c.jsx)(he.a,{})}),Object(c.jsx)(g.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,align:"center",children:"Open"}),Object(c.jsx)(K.b,{s2:!0}),Object(c.jsx)(T,{title:t.title,setTitle:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{title:e}))}}),Object(c.jsx)(A,{encryptionKey:t.encryptionKey,setEncryptionKey:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{encryptionKey:e}))}}),Object(c.jsx)(Ie,{setInitialData:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{initialData:e}))}}),Object(c.jsx)(K.b,{s2:!0,grow:!0}),""!==t.initialData&&""!==t.encryptionKey&&o&&Object(c.jsx)(g.a,{variant:"body2",color:"error",align:"center",children:"Key and data don't match"}),Object(c.jsx)(u.a,{fullWidth:!0,variant:"contained",disabled:o||0===t.encryptionKey.length,color:"primary",size:"medium",startIcon:Object(c.jsx)(y.a,{}),type:"submit",children:"Open"})]})}function Ae(e){var t=e.vaultData,n=e.onDelete,a=e.onSubmit,r=e.onChange;return Object(c.jsx)(z,{form:Object(c.jsx)(Ne,{vaultData:t,onChange:r,onDelete:n}),preview:Object(c.jsx)(J,Object(O.a)({},t)),onSubmit:a})}function Te(e){var t=e.onDataLoaded;return ce((function(e){var n=e.standardProposal;t(n.data)})),Object(c.jsx)(w.a,{title:"This app uses a free tier Heroku Dyno and will sleep after 30 minutes of inactivity",arrow:!0,children:Object(c.jsx)(g.a,{variant:"body1",display:"inline",children:"Warming up the server just for you..."})})}function Ke(e){var t=e.card,n=e.setCards,a=function(){n((function(e){return e.filter((function(e){return t.id!==e.id}))}))};return t.isLoading?Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(Te,{onDataLoaded:function(e){return n((function(n){return n.map((function(n){return n.id===t.id?Object(O.a)(Object(O.a)({},n),{},{vaultData:Object(O.a)(Object(O.a)({},n.vaultData),{},{initialData:e}),isLoading:!1}):n}))}))}}),Object(c.jsx)(K.b,{s2:!0})]}):t.isCreating?Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(Ae,{vaultData:t.vaultData,onSubmit:function(){var e=Object(O.a)(Object(O.a)({},t),{},{isCreating:!1,isReadOnly:!1});n((function(n){return n.map((function(n){return t.id===n.id?e:n}))}))},onDelete:a,onChange:function(e){n((function(n){return n.map((function(n){return n.id===t.id?Object(O.a)(Object(O.a)({},n),{},{vaultData:e}):n}))}))}}),Object(c.jsx)(K.b,{s2:!0})]}):Object(c.jsxs)(f.a,{in:t.isOpen,children:[Object(c.jsx)(p.a,{vaultData:t.vaultData,isReadOnly:t.isReadOnly,onDelete:a}),Object(c.jsx)(K.b,{s2:!0})]})}!function(e){e.STANDARD="STANDARD",e.EMPTY="EMPTY",e.CUSTOM="CUSTOM"}(xe||(xe={}));var Pe=n(107),Ee=n(48);function Re(e){var t=Object(Ee.b)();Object(d.useEffect)((function(){null!==t&&t.isSignedIn.get()||e([])}),[t,e]);var n=function(e){var t=Object(Ee.b)(),n=null===t||void 0===t?void 0:t.currentUser.get();if(!n||!n.isSignedIn())return!1;var a=n.hasGrantedScopes(e);return a||n.grant({scope:e}),a}(Pe.b);Object(d.useEffect)((function(){n&&gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, appProperties)",pageSize:100}).then((function(t){var n;e(null!==(n=t.result.files)&&void 0!==n?n:[])}))}),[n,e])}function Be(e){var t,n,a,r,c;return{resourceId:null!==(t=e.id)&&void 0!==t?t:"",vaultData:{title:null!==(n=null===(a=e.appProperties)||void 0===a?void 0:a.title)&&void 0!==n?n:"",encryptionKey:null!==(r=null===(c=e.appProperties)||void 0===c?void 0:c.encryptionKey)&&void 0!==r?r:"",initialData:""},isLoading:!1,isCreating:!1,isOpen:!1}}var ze=n(278),Fe=n.n(ze),Me=n(16);function Ue(){var e=Object(i.a)(),t=Object(d.useState)([]),n=Object(r.a)(t,2),O=n[0],f=n[1];!function(e){Re(Object(d.useCallback)((function(t){var n=t.map(Be);e(n)}),[e]))}(f);var p=Object(d.useState)([]),x=Object(r.a)(p,2),h=x[0],v=x[1];!function(e){var t=Object(Me.g)().search;Object(d.useEffect)((function(){var n,r=Fe.a.parse(t);if(null!=r.key||null!=r.data){var c=null==r.key||null==r.data,i={id:Object(ie.a)(),isOpen:!0,isReadOnly:!!c||"false"!==r.readOnly,isCreating:c,isLoading:!1,vaultData:{title:null!==(n=r.title)&&void 0!==n?n:"",encryptionKey:r.key?r.key.split(" ").join("+"):"",initialData:r.data?r.data.split(" ").join("+"):""}};e((function(e){return[i].concat(Object(a.a)(e))}))}}),[t,e])}(v);var y=h.filter((function(e){return!e.isCreating})),m=[Object(c.jsx)(oe,{addCard:function(e){return v((function(t){return[e].concat(Object(a.a)(t))}))}},"PreviewCardNavBar"),y.length>0&&Object(c.jsx)(o.a,{component:"nav",children:y.map((function(e){return Object(c.jsx)(de,{card:e,setCards:v},e.id)}))},"CardNavBar"),O.length>0&&Object(c.jsx)(o.a,{component:"nav",children:O.map((function(e){return Object(c.jsx)(pe,{card:e,setGoogleCards:f},e.resourceId)}))},"GoogleCardsNavBar")].map((function(e,t,n){return t===n.length-1?e:[e,Object(c.jsx)(s.a,{},"LeftNavSection-".concat(t))]})),g=[].concat(Object(a.a)(h.map((function(e){return Object(c.jsx)(Ke,{card:e,setCards:v},e.id)}))),Object(a.a)(O.map((function(e){return Object(c.jsx)(_,{card:e,setGoogleCards:f},e.resourceId)})))),C=Object(l.a)(e.breakpoints.up("sm")),D=Object(l.a)(e.breakpoints.up("xl")),w=Object(d.useState)(!0),S=Object(r.a)(w,2),k=S[0],I=S[1];return Object(c.jsxs)(c.Fragment,{children:[!C&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(K.b,{s2:!0}),Object(c.jsx)(u.a,{variant:"contained",color:"secondary",endIcon:Object(c.jsx)(b.a,{}),onClick:function(){return I(!0)},classes:{root:Object(P.a)({width:"fit-content",borderTopLeftRadius:0,borderBottomLeftRadius:0})}}),Object(c.jsx)(j.a,{anchor:"left",open:k,onClose:function(){return I(!1)},onOpen:function(){return I(!0)},classes:{paper:Object(P.a)({minWidth:250})},children:m})]}),Object(c.jsxs)("div",{className:Object(P.a)({display:"flex",flexGrow:1}),children:[C&&Object(c.jsx)("div",{className:Object(P.a)({flexBasis:200,flexShrink:0,borderRightColor:e.palette.divider,borderRightWidth:1,borderRightStyle:"solid"}),children:m}),Object(c.jsx)("div",{className:Object(P.a)({padding:e.spacing(2),flexGrow:1}),children:g}),D&&Object(c.jsx)("div",{className:Object(P.a)({flexBasis:250})})]})]})}}}]);
//# sourceMappingURL=9.9f17e1dc.chunk.js.map