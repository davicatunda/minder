(this.webpackJsonpminder=this.webpackJsonpminder||[]).push([[3],{146:function(e,t,n){"use strict";n.r(t);var c=n(38),r=n(5),i=(n(131),n(37)),a=n(78),o=n(16),s=n(89),l=n(41),j=n(184),u=n(185),b=n(191),d=n(58),O=n(180),h=n(182),C=n(183),g=n(163),x=n(189),p=n(190),m=n(192),f=n(193),v=n(84),k=n(0);function w(e){var t=e.size;return Object(r.jsx)("svg",{fill:"currentColor",width:null!==t&&void 0!==t?t:"100%",height:"100%",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("path",{d:"M 64.984 8.73 C 76.744 12.943 84.985 22.628 87.624 35.396 C 90.644 50.175 82.029 64.451 67.562 68.665 C 65.55 69.23 62.909 69.607 61.589 69.483 C 59.513 69.293 59.198 69.105 59.198 67.721 C 59.198 66.274 59.513 66.086 62.909 65.709 C 76.682 63.947 86.178 51.244 84.103 37.471 C 82.405 26.779 76.243 18.289 66.746 13.572 C 52.281 6.466 33.225 12.755 26.243 26.968 C 24.42 30.679 23.854 33.068 21.779 45.835 C 21.339 48.854 20.584 50.237 17.376 54.451 C 15.239 57.218 13.665 59.734 13.918 60.111 C 14.105 60.489 15.363 61.369 16.684 62.06 C 19.262 63.319 20.017 64.954 19.451 67.783 C 19.201 69.168 19.451 69.859 20.584 70.803 C 21.904 71.872 21.967 72.186 21.274 73.382 C 20.584 74.513 20.646 74.954 21.842 76.399 C 22.973 77.846 23.099 78.602 22.785 81.683 C 22.281 85.96 22.973 86.589 28.004 86.589 C 32.471 86.589 34.168 84.953 34.985 79.985 C 35.363 77.909 35.613 67.532 35.613 56.967 C 35.613 33.76 36.065 31.921 41.41 26.512 C 45.561 22.363 48.948 21.811 54.796 21.811 C 61.84 21.811 68.631 26.34 71.714 33.068 C 73.538 37.093 73.474 43.822 71.651 47.345 C 67.627 54.892 58.695 57.847 50.897 54.262 C 45.3 51.621 42.155 46.024 42.658 39.357 C 43.098 33.006 47.815 28.728 54.356 28.728 C 58.633 28.728 62.153 30.489 64.292 33.697 C 69.513 41.684 63.915 51.119 55.299 48.728 C 50.834 47.47 47.815 41.874 49.703 38.225 C 52.155 33.509 60.015 35.332 59.387 40.489 C 59.136 42.628 57.186 42.943 56.117 40.992 C 55.739 40.301 55.173 39.546 54.796 39.294 C 53.852 38.603 52.721 39.987 53.035 41.496 C 53.664 43.886 55.173 45.081 57.69 45.081 C 61.84 45.081 63.853 40.992 61.714 36.905 C 60.142 33.887 57.204 32.501 53.684 32.501 C 50.916 32.501 46.132 35.544 46.132 40.301 C 46.132 49.798 56.053 55.206 63.978 50.175 C 67.627 47.911 69.26 44.703 69.198 40.048 C 68.996 28.296 55.633 19.3 43.954 29.168 C 41.421 31.307 39.752 35.747 39.498 41.292 L 39.387 58.853 C 39.073 80.802 39.011 81.998 37.689 84.828 C 35.992 88.6 32.785 90.362 27.69 90.362 C 20.961 90.362 18.069 87.531 18.948 81.872 C 19.262 79.355 19.137 78.854 17.942 77.846 C 16.432 76.652 16.056 74.954 15.93 68.79 C 15.866 66.588 15.552 65.709 14.734 65.457 C 14.169 65.269 12.785 64.325 11.778 63.319 C 8.823 60.615 9.2 58.98 13.854 52.69 C 17.879 47.281 17.942 47.156 18.634 41.621 C 20.143 29.043 22.47 23.51 28.948 17.031 C 33.728 12.315 39.199 9.107 45.236 7.596 C 50.394 6.278 59.576 6.78 64.984 8.73 Z"})})}var S=n(79),I=n.n(S),y=n(91);var P=n(123),_=n(178),L=n(179),A=n(73),M=n(74),z=n(75),G=n(76),R={palette:{type:"light",primary:{main:A.a[500]},secondary:{main:M.a.A100},error:{main:z.a[500]},warning:{main:M.a[500]},info:{main:A.a[500]},success:{main:G.a[500]}}};function T(e){var t=e.children,n=function(){var e=Object(L.a)("(prefers-color-scheme: dark)")?"dark":"light",t=Object(k.useState)(localStorage.getItem("palette")),n=Object(l.a)(t,2),c=n[0],r=n[1],i=Object(k.useCallback)((function(){r((function(e){var t="dark"===e?"light":"dark";return localStorage.setItem("palette",t),t}))}),[]);switch(c){case"dark":return["dark",i];case"light":return["light",i];default:return[e,i]}}(),i=Object(l.a)(n,2),a=i[0],o=i[1],s=Object(k.useMemo)((function(){return Object(P.a)(Object(c.a)(Object(c.a)({},R),{},{palette:Object(c.a)(Object(c.a)({},R.palette),{},{type:a})}))}),[a]);return Object(r.jsx)(_.a,{theme:s,children:Object(r.jsx)(E.Provider,{value:{togglePalette:o},children:t})})}var E=Object(k.createContext)(null);function F(){var e=Object(s.a)(["\n      mutation Signin {\n        signin\n      }\n    "]);return F=function(){return e},e}var q="79887996241-lkot8h9s6ehcv4cd07kl9nsugt965pr8.apps.googleusercontent.com";function B(){var e=Object(d.a)(),t=function(){var e=Object(k.useContext)(E);if(null==e)throw new Error("missing TogglePaletteContext.Provider");return e}().togglePalette;return Object(r.jsx)(O.a,{position:"static",color:"light"===e.palette.type?"primary":"default",children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(W,{startIcon:Object(r.jsx)(w,{size:36}),route:"/minder",label:"Minder"}),Object(r.jsx)(W,{route:"/minder/memories",label:"Memories"}),Object(r.jsx)(W,{route:"/minder/standard",label:"Standard"}),Object(r.jsx)("div",{style:{flexGrow:1}}),Object(r.jsx)(C.a,{onClick:t,children:Object(r.jsx)(j.a,{})}),Object(r.jsx)("div",{style:{width:e.spacing(2)}}),Object(r.jsx)(J,{})]})})}function J(){var e=Object(i.useApolloClient)(),t=Object(i.useMutation)(Object(i.gql)(F())),n=Object(l.a)(t,1)[0],c=Object(k.useState)(!1),a=Object(l.a)(c,2),o=a[0],s=a[1],j=Object(v.useGoogleLogin)({clientId:q,cookiePolicy:"single_host_origin",isSignedIn:!0,onSuccess:function(t){s(!0);var c=t;localStorage.setItem("token",c.getAuthResponse().id_token),e.resetStore().then((function(){return n()})).then((function(t){var n=t.data;!0===(null===n||void 0===n?void 0:n.signin)?function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var c=Object(y.a)(I.a.mark((function c(){var r;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.reloadAuthResponse();case 2:r=c.sent,t=1e3*(r.expires_in||3300),localStorage.setItem("token",r.id_token),setTimeout(n,t);case 6:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();setTimeout(n,t)}(c):(localStorage.setItem("token",""),e.resetStore())}))},onFailure:function(e){s(!1)}}).signIn,d=Object(v.useGoogleLogout)({clientId:q,cookiePolicy:"single_host_origin",onLogoutSuccess:function(){s(!1),localStorage.setItem("token",""),e.resetStore()},onFailure:function(){}}).signOut,O=Object(k.useRef)(null),h=Object(k.useState)(!1),f=Object(l.a)(h,2),w=f[0],S=f[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{ref:O,children:o?Object(r.jsx)(C.a,{onClick:function(){return S(!0)},children:Object(r.jsx)(u.a,{})}):Object(r.jsx)(H,{onClick:function(){return S(!0)},children:"Log in"})}),Object(r.jsx)(g.a,{anchorEl:O.current,open:w,onClose:function(){return S(!1)},children:o?Object(r.jsxs)(x.a,{onClick:function(){S(!1),d()},children:[Object(r.jsx)(p.a,{style:{minWidth:36},children:Object(r.jsx)(b.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(m.a,{children:"Logout"})]}):Object(r.jsxs)(x.a,{onClick:function(){S(!1),j()},children:[Object(r.jsx)(p.a,{style:{minWidth:36},children:Object(r.jsx)(b.a,{fontSize:"small",color:"action"})}),Object(r.jsx)(m.a,{children:"Sign in with Google"})]})})]})}function W(e){var t=e.route,n=e.startIcon,c=e.label,i=Object(d.a)(),a=Object(o.g)(),s=Object(o.f)(),l=a.pathname===t&&"/minder"!==t;return Object(r.jsxs)(H,{onClick:function(){return s.push(t)},startIcon:n,children:[l&&Object(r.jsx)("span",{style:{position:"absolute",left:i.spacing(1),right:i.spacing(1),bottom:-i.spacing(1),height:2,backgroundColor:i.palette.common.white}}),c]})}function H(e){var t=e.onClick,n=e.startIcon,c=e.children;return Object(r.jsx)(f.a,{color:"inherit",onClick:t,startIcon:n,style:{textTransform:"none"},disableRipple:!0,children:Object(r.jsx)(m.a,{variant:"h6",children:c})})}var Z=n(56),D=Object(Z.a)((function(){return Promise.all([n.e(7),n.e(10)]).then(n.bind(null,283))})),K=Object(Z.a)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(1),n.e(8)]).then(n.bind(null,325))})),N=Object(Z.a)((function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(9)]).then(n.bind(null,320))})),Q=Object(Z.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,321))}));var U=function(){return Object(r.jsxs)(a.a,{children:[Object(r.jsx)(B,{}),Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{exact:!0,path:"/minder/",children:Object(r.jsx)(D,{})}),Object(r.jsx)(o.a,{exact:!0,path:"/minder/memories",children:Object(r.jsx)(K,{})}),Object(r.jsx)(o.a,{path:"/minder/standard",children:Object(r.jsx)(N,{})}),Object(r.jsx)(o.a,{path:"/minder/proposal/:proposalId",children:Object(r.jsx)(Q,{})})]})]})},V=n(194),X=n(122),Y=n(154),$=n(14),ee=n.n($),te=n(121),ne=Object(te.a)((function(e,t){var n,r=t.headers;return{headers:Object(c.a)(Object(c.a)({},r),{},{authorization:null!==(n=localStorage.getItem("token"))&&void 0!==n?n:""})}})),ce=new i.ApolloClient({link:ne.concat(Object(i.createHttpLink)({uri:"https://thawing-wildwood-69808.herokuapp.com/graphql"})),cache:new i.InMemoryCache});function re(){return Object(r.jsx)(i.ApolloProvider,{client:ce,children:Object(r.jsx)(Y.a,{utils:X.a,children:Object(r.jsxs)(T,{children:[Object(r.jsx)(V.a,{}),Object(r.jsx)(U,{})]})})})}ee.a.render(Object(r.jsx)(re,{}),document.getElementById("root"))}},[[146,4,5]]]);
//# sourceMappingURL=main.e6119ce4.chunk.js.map